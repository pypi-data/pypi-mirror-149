var se=Object.defineProperty,ne=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var J=(t,r,s)=>r in t?se(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,R=(t,r)=>{for(var s in r||(r={}))oe.call(r,s)&&J(t,s,r[s]);if(K)for(var s of K(r))le.call(r,s)&&J(t,s,r[s]);return t},A=(t,r)=>ne(t,ae(r));import{r as a,j as l,R as T,a as e,C as w,c as y,d as Y,B as ie,T as ce,b as B,e as P,f as de,N as S,F as Q,g as he,h as ue,L as $,I as me,D as pe,i as j,k,O as I,l as M,m as F,n as fe,o as ge}from"./vendor.74a400ac.js";const be=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const h of i.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}};be();function G(){return window.location.host}var x;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.OPEN=1]="OPEN",t[t.CLOSING=2]="CLOSING",t[t.CLOSED=3]="CLOSED"})(x||(x={}));function ve({onConnect:t}){const r=a.exports.useMemo(G,[]),[s,o]=a.exports.useState(!0),[n,i]=a.exports.useState([]),[h,f]=a.exports.useState([]),b=a.exports.useCallback(()=>new WebSocket(`ws://${r}/inspect/`),[r]),[m,v]=a.exports.useState(()=>b()),[N,g]=a.exports.useState(m.readyState);return a.exports.useEffect(()=>{g(m.readyState);const p=()=>{g(m.readyState),v(b())},C=()=>{t(),o(!1),g(m.readyState)},_=({data:c})=>{const{type:d,payload:u}=JSON.parse(c);switch(d){case"historic":if(s){const O=u.filter(({type:E})=>E==="request"),re=u.filter(({type:E})=>E==="response");i(E=>[...E,...O.map(({payload:D})=>D)]),f(E=>[...E,...re.map(({payload:D})=>D)])}break;case"request":i(O=>[...O,u]);break;case"response":f(O=>[...O,u]);break}};return m.addEventListener("message",_),m.addEventListener("close",p),m.addEventListener("open",C),()=>{m.removeEventListener("message",_),m.removeEventListener("close",p),m.removeEventListener("open",C)}},[m]),{calls:a.exports.useMemo(()=>n.map(p=>({request:p,response:h.find(({id:C})=>C===p.id)})),[n,h]),readyState:N,clear:()=>{i([]),f([])}}}const Ne="_app_1uh4e_1",xe="_main_1uh4e_9",we="_sidebar_1uh4e_16",Ce="_details_1uh4e_21";var q={app:Ne,main:xe,sidebar:we,details:Ce};const ye="_details_1n1bs_1",Se="_header_1n1bs_9",ke="_content_1n1bs_14",Ee="_noRequestSelected_1n1bs_20";var L={details:ye,header:Se,content:ke,noRequestSelected:Ee};function z(t,r,s){return t>=r&&t<=s}function Me(t){if(t===void 0)return"secondary";if(z(t,100,199))return"info";if(z(t,200,299))return"success";if(z(t,300,399))return"primary";if(z(t,400,499))return"danger";if(z(t,500,599))return"warning"}function X({requestResponse:{request:t,response:r},selected:s=!1,showTime:o=!1}){var n;return l(T,{children:[o&&e(w,{className:y("flex-grow-0 d-flex align-items-center text-nowrap",{"text-muted":!s}),children:Y(t.timestamp).format("LTS")}),e(w,{className:"flex-grow-0 d-flex align-items-center",children:t.method}),e(w,{className:"flex-grow-1",children:t.path}),e(w,{className:"flex-grow-0 d-flex align-items-center",children:e(ie,{className:y({border:s}),bg:Me(r==null?void 0:r.status),children:(n=r==null?void 0:r.status)!=null?n:"Loading..."})})]})}const _e="_content_1sg4q_1",Oe="_body_1sg4q_9",Te="_renderError_1sg4q_15";var V={content:_e,body:Oe,renderError:Te};const H=a.exports.createContext({});function Le({children:t}){const r=a.exports.useMemo(()=>new ce,[]),[s,o]=a.exports.useState(()=>r.getTheme()==="dark");return a.exports.useEffect(()=>{r.setTheme(s?"dark":"light")},[s]),e(H.Provider,{value:{darkMode:s,toggle:()=>o(n=>!n)},children:t})}function U(t,r,s){try{const[o,n]=t.find(([i])=>i.toLowerCase()===r.toLowerCase());return s!==void 0?`${n}${s}`:n}catch{return null}}function Z({raw:t,setRaw:r,data:s}){return l("div",{className:V.content,children:[e(B,{fluid:!0,className:"border-bottom",children:l(T,{className:"py-3",children:[l(w,{className:"form-check form-switch ms-3",children:[e("input",{className:"form-check-input",id:"raw",type:"checkbox",checked:t,role:"switch",onChange:()=>r(!t)}),e("label",{htmlFor:"raw",className:"form-check-label",children:"Raw"})]}),e(w,{xs:"auto",children:[U(s.headers,"content-length","bytes"),U(s.headers,"content-type")].filter(o=>o!==null).join("; ")})]})}),e(T,{className:V.body,children:(()=>{try{return ze({data:s,raw:t})}catch{return l("div",{className:V.renderError,children:[e("p",{children:"Body could not be rendered"}),e(P,{variant:"link",onClick:()=>r(!0),children:"View raw"})]})}})()})]})}function ze({data:t,raw:r=!1}){const{darkMode:s}=a.exports.useContext(H),o=a.exports.useMemo(()=>r?"":U(t.headers,"content-type").toLowerCase().split(";")[0],[t,r]);if(r)return e("pre",{className:"mb-0",children:e("code",{children:atob(t.body)})});if(["application/pdf","text/html"].includes(o))return e("iframe",{className:"bg-white",src:`data:${o};base64,${t.body}`,srcDoc:o==="text/html"?atob(t.body):void 0,loading:"lazy",sandbox:""});if(o.startsWith("application/json"))return e(de,{src:JSON.parse(atob(t.body)),theme:s?"monokai":void 0,style:{padding:"1em",width:"100%",height:"100%",overflowY:"auto"}});if(o.startsWith("audio"))return e("audio",{src:`data:${o};base64,${t.body}`});if(o.startsWith("video"))return e("video",{src:`data:${o};base64,${t.body}`});if(o.startsWith("image"))return e("img",{src:`data:${o};base64,${t.body}`,alt:""});throw new Error("Not Rendered")}function $e({timing:t}){const r=a.exports.useMemo(()=>Math.round(t*1e3)/1e3,[t]),s=a.exports.useMemo(()=>r>1,[r]);return Number.isNaN(r)?null:e(Q,{children:`${s?r:r*1e3}${s?"s":"ms"}`})}function ee({title:t,headers:r}){return e(he,{className:"m-3",children:l(ue,{striped:!0,responsive:!0,borderless:!0,hover:!0,className:"mb-0",children:[e("thead",{children:e("tr",{children:e("th",{colSpan:2,className:"bg-dark text-white rounded-top",children:t})})}),e("tbody",{children:r.map(([s,o])=>l("tr",{children:[e("td",{children:s}),e("td",{children:o})]}))})]})})}function Ie({requestResponse:t}){var h,f;const[r,s]=a.exports.useState("headers"),[o,n]=a.exports.useState(!1),i=a.exports.useCallback(async()=>t!==null&&fetch(`http://${G()}/resend/`,{method:"POST",body:JSON.stringify(A(R({},t.request),{id:void 0}))}),[t]);return t!==null?l("div",{className:L.details,children:[l("div",{className:L.header,children:[e(T,{children:e(w,{children:e(B,{fluid:!0,style:{fontSize:"1.5em"},className:"py-3",children:e(X,{requestResponse:t,className:L.summary})})})}),l(T,{className:"gx-0 d-flex",children:[e(w,{children:l(S,{variant:"tabs",activeKey:r,onSelect:b=>s(b),children:[e(S.Item,{children:e(S.Link,{eventKey:"headers",children:"Headers"})}),e(S.Item,{children:e(S.Link,{eventKey:"request",children:"Request"})}),e(S.Item,{children:e(S.Link,{eventKey:"response",disabled:t.response===void 0,children:"Response"})})]})}),l(w,{className:"border-bottom px-3 ",xs:"auto",children:[e($e,{timing:(f=(h=t.response)==null?void 0:h.timing)!=null?f:NaN}),e(P,{variant:"outline-primary",onClick:()=>i(),className:"ms-3",children:"Resend"})]})]})]}),l("div",{className:L.content,children:[r==="headers"&&l(Q,{children:[e(ee,{title:"request headers",headers:t.request.headers}),t.response&&e(ee,{title:"response headers",headers:t.response.headers})]}),r==="request"&&e(Z,{data:t.request,raw:o,setRaw:n}),r==="response"&&t.response!==void 0&&e(Z,{data:t.response,raw:o,setRaw:n})]})]}):e("div",{className:L.noRequestSelected,children:e("p",{children:"Select a request to inspect it"})})}function qe(){return e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-sliders",viewBox:"0 0 16 16",children:e("path",{"fill-rule":"evenodd",d:"M11.5 2a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM9.05 3a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0V3h9.05zM4.5 7a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM2.05 8a2.5 2.5 0 0 1 4.9 0H16v1H6.95a2.5 2.5 0 0 1-4.9 0H0V8h2.05zm9.45 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm-2.45 1a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0v-1h9.05z"})})}function He(){return e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-sun",viewBox:"0 0 16 16",children:e("path",{d:"M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"})})}function De(){return e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-moon",viewBox:"0 0 16 16",children:e("path",{d:"M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278zM4.858 1.311A7.269 7.269 0 0 0 1.025 7.71c0 4.02 3.279 7.276 7.319 7.276a7.316 7.316 0 0 0 5.205-2.162c-.337.042-.68.063-1.029.063-4.61 0-8.343-3.714-8.343-8.29 0-1.167.242-2.278.681-3.286z"})})}function Re(){return l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-trash",viewBox:"0 0 16 16",children:[e("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),e("path",{"fill-rule":"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})]})}const Ae="_noRequest_rvekj_1",Be="_list_rvekj_9",Pe="_listContainer_rvekj_13";var W={noRequest:Ae,list:Be,listContainer:Pe};function je(){return e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-filter",viewBox:"0 0 16 16",children:e("path",{d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})})}function Fe({requests:t,selectedRequestIndex:r,setSelectedRequestIndex:s}){const{darkMode:o}=a.exports.useContext(H),[n,i]=a.exports.useState(!1),[h,f]=a.exports.useState(""),[b,m]=a.exports.useState(!1),[v,N]=a.exports.useState({GET:!0,HEAD:!0,POST:!0,PUT:!0,DELETE:!0,CONNECT:!0,OPTIONS:!0,TRACE:!0,PATCH:!0}),g=a.exports.useCallback(c=>{const d=c==null,u={GET:d,HEAD:d,POST:d,PUT:d,DELETE:d,CONNECT:d,OPTIONS:d,TRACE:d,PATCH:d};c!==null&&(u[c]=!0),N(u)},[]),p=a.exports.useMemo(()=>Object.entries(v).filter(([c,d])=>d).map(([c])=>c),[v]),C=a.exports.useMemo(()=>p.length==1?p[0]:p.length===Object.keys(v).length?"ANY":"CUSTOM",[p]),_=a.exports.useMemo(()=>{let c=new RegExp("");try{c=new RegExp(b?h:h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i")}catch{}return t.map((d,u)=>[u,d]).reverse().filter(([d,u])=>p.length>0===null||p.includes(u.request.method)).filter(([d,u])=>h===""||c.test(u.request.path))},[t,h,p,b]);return l("div",{className:y(W.listContainer,"d-flex"),children:[e($,{variant:"flush",className:y("flex-grow-0","border-bottom"),children:e($.Item,{children:l(me,{children:[l(pe,{variant:"primary",title:C,children:[e(j.Item,{onClick:()=>g(null),children:"ANY"}),e(j.Divider,{}),Object.entries(v).map(([c,d])=>e(j.Item,{onClick:()=>g(c),children:c}))]}),e(k.Control,{type:"text",className:"border-secondary",value:h,placeholder:"Search...",onChange:({target:c})=>f(c.value)}),e(P,{variant:n?"secondary":"outline-secondary",onClick:()=>i(!0),children:e(je,{})})]})})}),e($,{variant:"flush",as:"ul",className:y(W.list,"flex-grow-1"),children:_.length>0?_.map(([c,d])=>{const u=r===c;return e($.Item,{as:"li",onClick:()=>s(c),className:y({"bg-primary":u,"text-light":u,"border-bottom":!0}),children:e(X,{requestResponse:d,selected:u,showTime:!0})},`request-${c}`)}):e("div",{className:W.noRequest,children:e("p",{children:"No requests"})})}),l(I,{className:y({"bg-dark":o}),show:n,onHide:()=>i(!1),children:[e(I.Header,{closeButton:!0,children:e(I.Title,{children:"Filter Options"})}),l(I.Body,{children:[l(k.Group,{className:"mb-4",children:[e(k.Label,{className:"fw-bold",children:"Search"}),e(k.Control,{type:"text",value:h,placeholder:"Search...",onChange:({target:c})=>f(c.value)}),e(k.Check,{className:"mt-2",type:"switch",label:"Regex search",checked:b,onChange:()=>m(!b)})]}),l(k.Group,{className:"mb-4",children:[e(k.Label,{className:"fw-bold",children:"Method"}),Object.entries(v).map(([c,d])=>e(k.Check,{type:"switch",label:c,checked:d,onChange:()=>N(A(R({},v),{[c]:!d}))}))]})]})]})]})}const te={[x.CONNECTING]:"\u{1F534}",[x.OPEN]:"\u{1F7E2}",[x.CLOSING]:"\u{1F534}",[x.CLOSED]:"\u{1F534}"},Ge={[x.CONNECTING]:"Connecting...",[x.OPEN]:"Connected",[x.CLOSING]:"Closing...",[x.CLOSED]:"Closed"};function Ve(){const{darkMode:t,toggle:r}=a.exports.useContext(H),[s,o]=a.exports.useState(null),{calls:n,readyState:i,clear:h}=ve({onConnect:async()=>{const g=await(await fetch(`http://${G()}/config/`)).json();o(g)}});a.exports.useEffect(()=>{var g;const N=new URL((g=s==null?void 0:s.url)!=null?g:"https://loading...");document.title=`${te[i]} ${N.host} | TTUN`},[i,s==null?void 0:s.url]);const[f,b]=a.exports.useState(null),m=a.exports.useMemo(()=>f===null?null:n[f],[f,n]),v=[{onClick:r,icon:t?e(He,{}):e(De,{}),label:t?"Light mode":"Dark mode"},null,{onClick:()=>{b(null),h()},icon:e(Re,{}),label:"Clear"}];return s&&l("div",{className:q.app,children:[e(M,{bg:"dark",variant:"dark",expand:!0,as:"header",children:l(B,{fluid:!0,children:[l("div",{children:[e(M.Brand,{children:"TTUN"}),e(M.Text,{children:`${te[i]} ${Ge[i]}`})]}),l("div",{className:"d-flex",children:[e(M.Text,{children:e("a",{href:s.url,target:"_blank",children:s.url})}),e(M.Toggle,{"aria-controls":"settings"}),e(M.Collapse,{id:"settings",className:"ms-2",children:e(S,{children:e(F,{align:"end",title:e(qe,{}),children:v.map(N=>{if(N!==null){const{onClick:g,icon:p,label:C}=N;return l(F.Item,{onClick:g,className:"d-flex align-items-center",children:[p,e("span",{className:"ms-3",children:C})]})}else return e(F.Divider,{})})})})})]})]})}),l("main",{className:q.main,children:[e("div",{className:y("border-end",q.sidebar),children:e(Fe,{requests:n,selectedRequestIndex:f,setSelectedRequestIndex:b})}),e("div",{className:q.details,children:e(Ie,{requestResponse:m})})]})]})}Y.extend(fe);ge.exports.render(e(Le,{children:e(Ve,{})}),document.getElementById("root"));
