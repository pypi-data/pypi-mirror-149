"use strict";(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[204],{48433:function(e,n,t){t.r(n),t.d(n,{default:function(){return kn}});var i=t(99500),o=t(85358),r=t(59019),a=t(47427),s=t(19065),l=t(95764),c=t(54899),d=t(95550),u=t.n(d),p=t(2380),f=t(69131),g=t(84464),m=t(45519),h=t(73716),v=t(47515),y=t(32667),x=t(4537),C=t(6650),A=t.n(C),w=t(60457),b=t.n(w),j=t(78193),S=t(64959),k=t(80005),E=t(29006),_=t(92014),P=t(30382),N=t(57994),R=t(98907),Z=t(64428),I=t(28463),O=(t(66924),t(12697),t(63344),t(57366),t(11492),t(39091),t(53574),t(51916),t(78482),t(59302),t(61051),t(88317),t(91821)),M=t.n(O),T="CodeMirror-lint-markers";function F(e){e.parentNode&&e.parentNode.removeChild(e)}function K(e,n,t){var i=function(e,n,t){var i=document.createElement("div"),o=t.getBoundingClientRect();return i.className="CodeMirror-lint-tooltip",i.appendChild(n.cloneNode(!0)),document.body.appendChild(i),o.top>i.clientHeight?(i.style.top=o.top-i.clientHeight-5+"px",i.style.left=o.left+5+"px"):(i.style.top=o.top+5+"px",i.style.left=o.right+10+"px"),null!=i.style.opacity&&(i.style.opacity=1),i}(0,n,t);function o(){var e;M().off(t,"mouseout",o),i&&((e=i).parentNode&&(null==e.style.opacity&&F(e),e.style.opacity=0,setTimeout((function(){F(e)}),600)),i=null)}var r=setInterval((function(){if(i)for(var e=t;;e=e.parentNode){if(e&&11===e.nodeType&&(e=e.host),e===document.body)return;if(!e){o();break}}if(!i)return clearInterval(r)}),400);M().on(t,"mouseout",o)}function L(e){var n=e.state.lint;n.hasGutter&&e.clearGutter(T);for(var t=0;t<n.marked.length;++t)n.marked[t].clear();n.marked.length=0}function D(e,n,t,i){var o=document.createElement("div"),r=o;return o.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+n,t&&((r=o.appendChild(document.createElement("div"))).className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),!1!==i&&M().on(r,"mouseover",(function(n){K(0,e,r)})),o}function G(e){var n=e.severity;n||(n="error");var t=document.createElement("div");return t.className="CodeMirror-lint-message CodeMirror-lint-message-"+n,"undefined"!==typeof e.messageHTML?t.innerHTML=e.messageHTML:t.appendChild(document.createTextNode(e.message)),t}function V(e,n){L(e);for(var t,i,o=e.state.lint,r=o.options,a=function(e){for(var n=[],t=0;t<e.length;++t){var i=e[t],o=i.from.line;(n[o]||(n[o]=[])).push(i)}return n}(n),s=0;s<a.length;++s){var l=a[s];if(l){for(var c=null,d=o.hasGutter&&document.createDocumentFragment(),u=0;u<l.length;++u){var p=l[u],f=p.severity;f||(f="error"),i=f,c="error"===(t=c)?t:i,r.formatAnnotation&&(p=r.formatAnnotation(p)),o.hasGutter&&d.appendChild(G(p)),p.to&&o.marked.push(e.markText(p.from,p.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+f,__annotation:p}))}o.hasGutter&&e.setGutterMarker(s,T,D(d,c,l.length>1,o.options.tooltips))}}r.onUpdateLinting&&r.onUpdateLinting(n,a,e)}function H(e){var n=e.state.lint.options,t=n.options||n,i=n.getAnnotations||e.getHelper(M().Pos(0,0),"lint");if(i)if(n.async||i.async)!function(e,n,t){var i=e.state.lint,o=++i.waitingFor;function r(){o=-1,e.off("change",r)}e.on("change",r),n(e.getValue(),(function(n,t){e.off("change",r),i.waitingFor===o&&(t&&n instanceof M()&&(n=t),e.operation((function(){V(e,n)})))}),t,e)}(e,i,t);else{var o=i(e.getValue(),t,e);if(!o)return;o.then?o.then((function(n){e.operation((function(){V(e,n)}))})):e.operation((function(){V(e,o)}))}}function z(e){var n=e.state.lint;n&&(clearTimeout(n.timeout),n.timeout=setTimeout((function(){H(e)}),n.options.delay||500))}function B(e,n){for(var t=(n.target||n.srcElement).getBoundingClientRect(),i=(t.left+t.right)/2,o=(t.top+t.bottom)/2,r=e.coordsChar({left:i,top:o},"client"),a=e.findMarksAt(r),s=e.getHelper(M().Pos(0,0),"dagster-docs")(e,r),l=[],c=0;c<a.length;++c){var d=a[c].__annotation;d&&l.push(d)}(s||l.length)&&function(e,n,t){var i=t.target||t.srcElement,o=document.createDocumentFragment();if(e){var r=document.createElement("div");r.textContent=e,o.appendChild(r),n.length&&(r.style.paddingBottom="4px",r.style.marginBottom="4px",r.style.borderBottom="1px solid rgba(0,0,0,0.25)")}for(var a=0;a<n.length;a++){var s=n[a];o.appendChild(G(s))}K(0,o,i)}(s,l,n)}function Q(e,n,t){this.marked=[],this.options=n,this.timeout=null,this.hasGutter=t,this.onMouseOver=function(n){B(e,n)},this.waitingFor=0}M().defineOption("lint",!1,(function(e,n,t){if(t&&t!==M().Init&&(L(e),!1!==e.state.lint.options.lintOnChange&&e.off("change",z),M().off(e.getWrapperElement(),"mouseover",e.state.lint.onMouseOver),clearTimeout(e.state.lint.timeout),delete e.state.lint),n){for(var i=e.getOption("gutters"),o=!1,r=0;r<i.length;++r)i[r]===T&&(o=!0);var a=e.state.lint=new Q(e,(s=n)instanceof Function?{getAnnotations:s}:(s&&!0!==s||(s={}),s),o);!1!==a.options.lintOnChange&&e.on("change",z),!1!==a.options.tooltips&&"gutter"!==a.options.tooltips&&M().on(e.getWrapperElement(),"mouseover",a.onMouseOver)}var s})),M().defineExtension("performLint",(function(){this.state.lint&&H(this)}));var U,Y,q,$,J=t(21808),W=t(8759),X=t.n(W),ee=t(96211),ne=t(35936),te=/^[a-zA-Z0-9_@(]$/,ie=X()((function(e){e.performLint()}),1e3),oe=(0,c.vJ)(U||(U=(0,i.Z)(["\n  .react-codemirror2 .CodeMirror.cm-s-config-editor {\n    height: initial;\n    position: absolute;\n    inset: 0;\n  }\n"]))),re=(0,c.vJ)(Y||(Y=(0,i.Z)(["\n.cm-whitespace {\n  /*\n    Note: background is a 16x16px PNG containing a semi-transparent gray dot. 8.4px\n    is the exact width of a character in Codemirror's monospace font. It's consistent\n    in Firefox and Chrome and doesn't change on zoom in / out, but may need to be\n    modified if we change the Codemirror font.\n  */\n  background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAAAm0lEQVQ4Ee2RMQ7DIAxFMVIvBEvm7FXXniIXak4RhnTujMSBkKDfCgPCzg2whAzf9hN8jJlBmgUxxgf0DWvFykR0Ouc+yGXsFwAeRuOv1rr0zdACIC/k2uu2P7T9Ng6zDu2ZUnqP/RqAr61GKUXUNEBWpy9R1AQAbzzvAFpNAJrbQYHs3nuhi1/gQRhGbFh7c7bWfgE+FOiU4MAfhpIwd0LjE+wAAAAASUVORK5CYII=') center left / 8.0px 8.0px repeat-x;\n  opacity: 1;\n  background-position-x: 0px;\n  background-position-y: 5.5px;\n}\n.cm-whitespace.CodeMirror-lint-mark-error {\n  background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAAAm0lEQVQ4Ee2RMQ7DIAxFMVIvBEvm7FXXniIXak4RhnTujMSBkKDfCgPCzg2whAzf9hN8jJlBmgUxxgf0DWvFykR0Ouc+yGXsFwAeRuOv1rr0zdACIC/k2uu2P7T9Ng6zDu2ZUnqP/RqAr61GKUXUNEBWpy9R1AQAbzzvAFpNAJrbQYHs3nuhi1/gQRhGbFh7c7bWfgE+FOiU4MAfhpIwd0LjE+wAAAAASUVORK5CYII=') center left / 8.0px 8.0px repeat-x;\n}\n"]))),ae=function(e){(0,Z.Z)(t,e);var n=(0,I.Z)(t);function t(){var e;(0,N.Z)(this,t);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=n.call.apply(n,[this].concat(o)))._editor=void 0,e.moveCursor=function(n,t){var i;if(e._editor){e._editor.setCursor(n,t,{scroll:!1});var o=e._editor.getScrollInfo().clientHeight,r=e._editor.cursorCoords(!0,"local"),a=r.left,s=r.top;null===(i=e._editor)||void 0===i||i.scrollIntoView({left:a,right:a,top:s-20,bottom:s+(o-20)}),e._editor.focus()}},e.moveCursorToPath=function(n){if(e._editor){var t=e._editor.getDoc(),i=S.wL(e.props.configCode),o=(0,J.$P)(i,n,"key");if(o){var r=t.posFromIndex(o?o.start:0);e.moveCursor(r.line,r.ch)}}},e}return(0,R.Z)(t,[{key:"componentDidUpdate",value:function(e){this._editor&&e.runConfigSchema!==this.props.runConfigSchema&&this.performInitialPass()}},{key:"shouldComponentUpdate",value:function(e){return e.configCode!==this.props.configCode||e.readOnly!==this.props.readOnly||e.runConfigSchema!==this.props.runConfigSchema||e.showWhitespace!==this.props.showWhitespace}},{key:"performInitialPass",value:function(){ie(this._editor);var e=(0,J.Im)(this._editor).context;this.props.onHelpContextChange(e?{type:e.closestMappingType}:null)}},{key:"render",value:function(){var e=this;return(0,ne.jsxs)("div",{style:{flex:1,position:"relative"},children:[(0,ne.jsx)(oe,{}),this.props.showWhitespace?(0,ne.jsx)(re,{}):null,(0,ne.jsx)(ee.Zr,{value:this.props.configCode,theme:["config-editor"],options:{mode:"yaml",lineNumbers:!0,readOnly:this.props.readOnly,indentUnit:2,smartIndent:!0,showCursorWhenSelecting:!0,lintOnChange:!1,lint:{checkConfig:this.props.checkConfig,lintOnChange:!1,onUpdateLinting:!1},hintOptions:{completeSingle:!1,closeOnUnfocus:!1,schema:this.props.runConfigSchema},keyMap:"sublime",extraKeys:{"Cmd-Space":function(e){return e.showHint({completeSingle:!0})},"Ctrl-Space":function(e){return e.showHint({completeSingle:!0})},"Alt-Space":function(e){return e.showHint({completeSingle:!0})},"Shift-Tab":function(e){return e.execCommand("indentLess")},Tab:function(e){return e.execCommand("indentMore")},"Cmd-F":"findPersistent","Ctrl-F":"findPersistent"},gutters:["CodeMirror-foldgutter","CodeMirror-lint-markers","CodeMirror-linenumbers"],foldGutter:!0},editorDidMount:function(n){e._editor=n,e.performInitialPass()},onBeforeChange:function(n,t,i){e.props.onConfigChange(i)},onCursorActivity:function(n){if(n.getSelection().length)e.props.onHelpContextChange(null);else{var t=(0,J.Im)(n).context;e.props.onHelpContextChange(t?{type:t.closestMappingType}:null)}},onChange:function(e){ie(e)},onBlur:function(e){ie(e)},onKeyUp:function(e,n){te.test(n.key)&&e.execCommand("autocomplete")}})]})}}]),t}(j.Component),se=(0,f.Ps)(q||(q=(0,i.Z)(["\n  fragment ConfigEditorRunConfigSchemaFragment on RunConfigSchema {\n    rootConfigType {\n      key\n    }\n    allConfigTypes {\n      __typename\n      key\n      description\n      isSelector\n      typeParamKeys\n      ... on RegularConfigType {\n        givenName\n      }\n      ... on MapConfigType {\n        keyLabelName\n      }\n      ... on EnumConfigType {\n        givenName\n        values {\n          value\n          description\n        }\n      }\n      ... on CompositeConfigType {\n        fields {\n          name\n          description\n          isRequired\n          configTypeKey\n          defaultValueAsJson\n        }\n      }\n      ... on ScalarUnionConfigType {\n        key\n        scalarTypeKey\n        nonScalarTypeKey\n      }\n    }\n  }\n"]))),le=(0,f.Ps)($||($=(0,i.Z)(["\n  fragment ConfigEditorValidationFragment on PipelineConfigValidationResult {\n    __typename\n    ... on RunConfigValidationInvalid {\n      errors {\n        __typename\n        reason\n        message\n        stack {\n          entries {\n            __typename\n            ... on EvaluationStackPathEntry {\n              fieldName\n            }\n            ... on EvaluationStackListItemEntry {\n              listIndex\n            }\n            ... on EvaluationStackMapKeyEntry {\n              mapKey\n            }\n            ... on EvaluationStackMapValueEntry {\n              mapKey\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function ce(e){return e.map((function(e){switch(e.__typename){case"EvaluationStackPathEntry":return e.fieldName;case"EvaluationStackListItemEntry":return"".concat(e.listIndex);case"EvaluationStackMapKeyEntry":case"EvaluationStackMapValueEntry":return"".concat(e.mapKey)}}))}function de(e,n){if("RunConfigValidationInvalid"!==n.__typename)return{isValid:!0};var t=n.errors.map((function(e){return{message:e.message,reason:e.reason,path:ce(e.stack.entries)}})),i=Object.keys(e);return t.forEach((function(e){0===e.path.length&&i.length&&(e.path=[i[0]])})),{isValid:!1,errors:t}}var ue,pe,fe,ge,me=function(e,n){return(e&&e.type.key)===(n&&n.type.key)},he=t(79962),ve=t(68506),ye=t(2191),xe=t(28832),Ce=t(11311),Ae=j.memo((function(e){var n=e.context,t=e.allInnerTypes;return n?(0,ne.jsxs)(je,{children:[(0,ne.jsx)(be,{children:(0,ne.jsx)(Ce.L,{type:n.type,typesInScope:t,maxDepth:2})}),(0,ne.jsx)(we,{children:"Use Ctrl+Space to show auto-completions inline."})]}):(0,ne.jsx)(je,{})}),(function(e,n){return me(e.context,n.context)})),we=c.ZP.div.withConfig({displayName:"ConfigEditorHelp__AutocompletionsNote",componentId:"m6wyvs-0"})(["font-size:0.75rem;text-align:center;padding:4px;border-top:1px solid ",";background:",";color:",";"],y.w.KeylineGray,y.w.Gray100,y.w.Gray500),be=c.ZP.div.withConfig({displayName:"ConfigEditorHelp__ConfigScrollWrap",componentId:"m6wyvs-1"})(["padding:8px;color:",";flex:1;pointer-events:initial;max-height:100%;overflow-y:auto;"],y.w.Dark),je=c.ZP.div.withConfig({displayName:"ConfigEditorHelp__Container",componentId:"m6wyvs-2"})(["position:relative;display:flex;flex-direction:column;background-color:",";height:100%;"],y.w.Gray50),Se=t(25581),ke=t(85357),Ee=function(e){var n=e.modeName?e.modes.find((function(n){return n.name===e.modeName})):e.modes[0];j.useEffect((function(){var t;n&&n.name!==e.modeName&&(null===(t=e.onModeChange)||void 0===t||t.call(e,n.name))}),[n,e.modeName]);var t=1===e.modes.length,i=!e.modeError,o=t&&i;return(0,ne.jsx)(Se.P,{activeItem:n,filterable:!0,disabled:o,items:e.modes,itemPredicate:function(e,n){return 0===e.length||n.name.includes(e)},itemRenderer:function(e,n){return(0,ne.jsx)(ke.sN,{active:n.modifiers.active,text:e.name,onClick:n.handleClick},e.name)},onItemSelect:function(n){var t;null===(t=e.onModeChange)||void 0===t||t.call(e,n.name)},children:(0,ne.jsx)(m.zx,{icon:i?void 0:(0,ne.jsx)(h.JO,{name:"error"}),intent:i?"none":"danger",title:o?"To add a mode, add a ModeDefinition to the pipeline.":"Current execution mode",disabled:o,rightIcon:(0,ne.jsx)(h.JO,{name:"expand_more"}),"data-test-id":"mode-picker-button",children:i?n?"Mode: ".concat(n.name):"Select Mode":"Invalid Mode Selection"})})},_e=t(8686),Pe=t(87919),Ne=function(e){var n=e.canRemove,t=e.title,i=e.onChange,o=e.onClick,r=e.onRemove,a=e.active,l=j.useRef(null),c=j.useState(!1),d=(0,s.Z)(c,2),u=d[0],p=d[1],f=j.useState(t),g=(0,s.Z)(f,2),m=g[0],v=g[1],x=j.useCallback((function(){i&&p(!0)}),[i]),C=j.useCallback((function(e){e.stopPropagation(),r&&r()}),[r]),A=j.useCallback((function(){p(!1),i&&i(m)}),[i,m]),w=j.useCallback((function(e){return v(e.target.value)}),[]);return j.useEffect((function(){var e=l.current;e&&u&&(e.focus(),e.select())}),[u]),(0,ne.jsxs)(Ie,{$active:a||!1,onDoubleClick:x,onClick:o,children:[u?(0,ne.jsx)("input",{ref:l,type:"text",onKeyDown:function(e){return"Enter"===e.key&&e.currentTarget.blur()},onChange:w,onBlur:A,value:m,placeholder:"Type a tab name\u2026"}):t,n&&!u&&r?(0,ne.jsx)(Oe,{onClick:C,children:(0,ne.jsx)(h.JO,{name:"close",color:y.w.Olive500})}):null]})},Re=function(e){var n=e.data,t=e.onCreate,i=e.onSave,r=n.sessions,a=Object.keys(r),s=a.length,l=(0,Pe.p)(),c=function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];i(e.apply(void 0,[n].concat(o)))},d=function(){var e=(0,o.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s>1)){e.next=4;break}return e.next=3,l({title:"Discard tab?",description:"The configuration for ".concat(n?'"'.concat(r[n].name,'"'):"this tab"," will be discarded.")});case 3:c(E.Jy,n);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,ne.jsx)(v.x,{border:{side:"bottom",width:1,color:y.w.KeylineGray},padding:{horizontal:12,top:12},children:(0,ne.jsxs)(Ze,{children:[a.map((function(e){return(0,ne.jsx)(Ne,{canRemove:s>1,active:e===n.current,title:r[e].name||"Unnamed",onClick:function(){return c(E.XH,e)},onChange:function(n){return c(E.sU,e,{name:n})},onRemove:function(){return d(e)}},e)})),(0,ne.jsx)(Ne,{title:"+ Add...",onClick:t})]})})},Ze=c.ZP.div.withConfig({displayName:"LaunchpadTabs__LaunchpadTabsContainer",componentId:"sc-2w3op5-0"})(["display:flex;flex-direction:row;font-size:13px;gap:8px;z-index:1;flex-direction:row;"]),Ie=c.ZP.div.withConfig({displayName:"LaunchpadTabs__TabContainer",componentId:"sc-2w3op5-1"})(["align-items:center;user-select:none;padding:8px 12px;display:inline-flex;align-items:center;gap:4px;border-top-left-radius:8px;border-top-right-radius:8px;"," &:last-child{padding-right:12px;}input{background-color:transparent;font-size:13px;border:0;outline:none;padding:0;}cursor:",";"],(function(e){return e.$active?(0,c.iv)(ue||(ue=(0,i.Z)(["\n          font-weight: 600;\n          background-color: ",";\n          color: ",";\n          box-shadow: "," 0 -2px 0 inset;\n        "])),y.w.Gray100,y.w.ForestGreen,y.w.ForestGreen):(0,c.iv)(pe||(pe=(0,i.Z)(["\n          font-weight: normal;\n          background-color: ",";\n          color: ",";\n          box-shadow: "," 0 -1px 0 inset;\n\n          &:hover {\n            background-color: ",";\n            box-shadow: "," 0 -1px 0 inset;\n            color: ",";\n          }\n        "])),y.w.Gray50,y.w.Gray300,y.w.Olive200,y.w.Gray100,y.w.Olive500,y.w.Olive500)}),(function(e){return e.$active?"inherit":"pointer"})),Oe=c.ZP.button.withConfig({displayName:"LaunchpadTabs__RemoveButton",componentId:"sc-2w3op5-2"})(["background-color:transparent;border:0;cursor:pointer;padding:0;","{transition:background-color 100ms;}&:hover ","{background-color:",";}"],h.a1,h.a1,y.w.Olive700),Me=t(56791),Te=t(73070),Fe=t(62709),Ke=t(55500),Le=t(37779),De=t(64218),Ge=t(92761),Ve=(0,f.Ps)(fe||(fe=(0,i.Z)(["\n  query OpSelectorQuery($selector: PipelineSelector!, $requestScopeHandleID: String) {\n    pipelineOrError(params: $selector) {\n      __typename\n      ... on Pipeline {\n        id\n        name\n        solidHandles(parentHandleID: $requestScopeHandleID) {\n          handleID\n          solid {\n            name\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on InvalidSubsetError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n  ","\n  ","\n"])),Le.Q,_.Bq),He=function(e){var n=e.serverProvidedSubsetError,t=e.onChange,i=e.pipelineName,o=e.repoAddress,r=e.onFlattenGraphsChange,a=j.useState(!1),c=(0,s.Z)(a,2),d=c[0],u=c[1],f=j.useRef(null),g=e.flattenGraphs||!1,m=(0,l.Z)((0,l.Z)({},(0,ye.$)(o)),{},{pipelineName:i}),h=(0,Ge.Ux)(o),y=(0,Ge.E8)(h,i),x=(0,p.useQuery)(Ve,{variables:{selector:m,requestScopeHandleID:g?void 0:""},fetchPolicy:"cache-and-network"}),C=x.data,A=x.loading,w=e.query||"*",b=("Pipeline"===(null===C||void 0===C?void 0:C.pipelineOrError.__typename)?g?(0,Ke.i)(C.pipelineOrError.solidHandles):C.pipelineOrError.solidHandles:[]).map((function(e){return e.solid})),S=g||b.some((function(e){return"CompositeSolidDefinition"===e.definition.__typename})),k="Pipeline"!==(null===C||void 0===C?void 0:C.pipelineOrError.__typename)&&(null===C||void 0===C?void 0:C.pipelineOrError.message)||null,E=(0,Fe.V)(b,w).all,_=!A&&0===E.length?y?"You must provide a valid op query or * to execute the entire job.":"You must provide a valid solid query or * to execute the entire pipeline.":n?n.message:k;return null!==C&&void 0!==C&&C.pipelineOrError?(0,ne.jsx)(v.x,{flex:{direction:"row",alignItems:"center",gap:8},children:(0,ne.jsx)(Te.J,{isOpen:d&&!!_,position:"bottom-left",content:(0,ne.jsx)(ze,{children:_}),children:(0,ne.jsx)(P.b,{shortcutLabel:"\u2325S",shortcutFilter:function(e){return"KeyS"===e.code&&e.altKey},onShortcut:function(){var e;return null===(e=f.current)||void 0===e?void 0:e.focus()},children:(0,ne.jsx)(De.j,{width:"*"!==w&&""!==w||d||S?350:90,intent:_?"danger":"none",items:b,ref:f,value:w,placeholder:"Type an op subset\u2026",onChange:function(e){""===e&&(e="*");var n=(0,Fe.V)(b,e).all;n.length===b.length?t(null,e):t(n.map((function(e){return e.name})),e)},onFocus:function(){return u(!0)},onBlur:function(){return u(!1)},linkToPreview:{repoName:o.name,repoLocation:o.location,pipelineName:i,isJob:y},flattenGraphsEnabled:S,flattenGraphs:g,setFlattenGraphs:function(){r(!g)}})})})}):null},ze=c.ZP.div.withConfig({displayName:"OpSelector__PopoverErrorWrap",componentId:"sc-6j6o1g-0"})(["padding:4px 8px;border-radius:2px;border:1px solid ",";background:",";color:",";"],y.w.Red500,y.w.Red200,y.w.Red700),Be=t(16540),Qe=t(81034),Ue=t(83473),Ye=t(92555),qe=t(44229),$e=t(95714),Je=t(17914),We=["resources","ops","solids"];function Xe(e){return!(!e||"object"!==typeof e||!("__typename"in e))}var en={invalid:{title:"You need to fix this configuration section.",intent:"danger"},missing:{title:"You need to add this configuration section.",intent:"danger"},present:{title:"This section is present and valid.",intent:"none"},none:{title:"This section is empty and valid.",intent:"none"}},nn=function(e){var n,t=e.onRemoveExtraPaths,i=e.extraNodes,r=(0,Pe.p)(),l={},c=[],d=(0,a.Z)(i);try{for(d.s();!(n=d.n()).done;){var p=n.value,f=p.split(".");if(2===f.length){var g=(0,s.Z)(f,2),h=g[0],v=g[1];l[h]||(l[h]=[]),l[h].push(v)}else c.push(p)}}catch(x){d.e(x)}finally{d.f()}var y=function(){var e=(0,o.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r({title:"Remove extra config",description:(0,ne.jsxs)("div",{children:[(0,ne.jsx)("p",{children:"You have provided extra configuration in your run config which does not conform to your\n            pipeline's config schema."}),Object.entries(l).length>0&&Object.entries(l).map((function(e){var n=(0,s.Z)(e,2),t=n[0],i=n[1];return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsxs)("p",{children:["Extra ",t,":"]}),(0,ne.jsx)("ul",{children:i.map((function(e){return(0,ne.jsx)("li",{children:(0,ne.jsx)(Ue.EK,{children:e})},e)}))})]})})),c.length>0&&(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)("p",{children:"Other extra paths:"}),(0,ne.jsx)("ul",{children:c.map((function(e){return(0,ne.jsx)("li",{children:(0,ne.jsx)(Ue.EK,{children:e})},e)}))})]}),(0,ne.jsx)("p",{children:"Clicking confirm will automatically remove this extra configuration from your run config."})]})});case 2:t(i);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,ne.jsx)(m.zx,{onClick:y,children:"Remove Extra Config"})},tn=function(e){var n=e.onScaffoldMissingConfig,t=e.missingNodes,i=(0,Pe.p)(),r=(0,ne.jsxs)("div",{children:[t.length>0&&(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)("p",{children:"Missing paths:"}),(0,ne.jsx)("ul",{children:t.map((function(e){return(0,ne.jsx)("li",{children:(0,ne.jsx)(Ue.EK,{children:e})},e)}))})]}),(0,ne.jsx)("p",{children:"Clicking confirm will automatically scaffold this missing configuration into your run config with default values. You will need to change the values appropriately."})]}),a=function(){var e=(0,o.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({title:"Scaffold missing config",description:r});case 2:n();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,ne.jsx)(m.zx,{onClick:a,children:"Scaffold missing config"})},on=function(e){var n=e.document,t=e.validation,i=e.onHighlightPath,o=e.onRemoveExtraPaths,l=e.onScaffoldMissingConfig,c=e.solidSelection,d=e.runConfigSchema,u=j.useState(!1),p=(0,s.Z)(u,2),f=p[0],m=p[1],h=j.useMemo((function(){if(!d)return{};var e=d.allConfigTypes,n=d.rootConfigType,t={},i=e.find((function(e){return e.key===n.key}));return"CompositeConfigType"!==(null===i||void 0===i?void 0:i.__typename)||i.fields.forEach((function(n){var i=e.find((function(e){return e.key===n.configTypeKey}));"CompositeConfigType"===(null===i||void 0===i?void 0:i.__typename)&&(t[n.name]=i)})),t}),[d]),y=[],x=[],C=[];if(t&&"RunConfigValidationInvalid"===t.__typename&&t.errors.forEach((function(e){var n=ce(e.stack.entries);if(C.push({pathKey:n.join("."),error:e}),"MissingFieldConfigError"===e.__typename)x.push([].concat((0,r.Z)(n),[e.field.name]).join("."));else if("MissingFieldsConfigError"===e.__typename){var t,i=(0,a.Z)(e.fields);try{for(i.s();!(t=i.n()).done;){var o=t.value;x.push([].concat((0,r.Z)(n),[o.name]).join("."))}}catch(d){i.e(d)}finally{i.f()}}else if("FieldNotDefinedConfigError"===e.__typename)y.push([].concat((0,r.Z)(n),[e.fieldName]).join("."));else if("FieldsNotDefinedConfigError"===e.__typename){var s,l=(0,a.Z)(e.fieldNames);try{for(l.s();!(s=l.n()).done;){var c=s.value;y.push([].concat((0,r.Z)(n),[c]).join("."))}}catch(d){l.e(d)}finally{l.f()}}else"RuntimeMismatchConfigError"===e.__typename&&x.push(n.join("."))})),"InvalidSubsetError"===(null===t||void 0===t?void 0:t.__typename)&&C.push({pathKey:"",error:t.message}),"PythonError"===(null===t||void 0===t?void 0:t.__typename)){var A=(0,ne.jsx)(_.T9,{error:t});C.push({pathKey:"",error:(0,ne.jsxs)("span",{children:["PythonError:"," ",(0,ne.jsx)(Ye.Z,{onClick:function(){return(0,k._)({body:A})},children:"Click for details"})]})})}var w=h.resources,b=h.ops,S=h.solids,E=(0,Qe.Z)(h,We),P=!(null===b||void 0===b||!b.fields),N=function(e,t){var o=t.map((function(t){if(null!==c&&void 0!==c&&c.length&&(null===c||void 0===c||!c.includes(t.name)))return null;var o=[].concat((0,r.Z)(e),[t.name]),a=o.join("."),s=C.filter((function(e){return e.pathKey===a||e.pathKey.startsWith("".concat(a,"."))})).map((function(e){return e.error})),l=gn(o,n),d=x.some((function(e){return e.includes(o.join("."))})),u=s.length||d,p=o.some((function(e,n){return x.includes(o.slice(0,n+1).join("."))}));if(f&&!u)return!1;var g=p&&t.isRequired?"missing":u?"invalid":l?"present":"none";return(0,ne.jsx)(qe.u,{position:"bottom",content:en[g].title,intent:en[g].intent,children:(0,ne.jsx)($e.V,{intent:en[g].intent,onClick:function(){var e=s.find(Xe);i(e?ce(e.stack.entries):o)},children:t.name},t.name)},t.name)})).filter(Boolean);return o.length?o:(0,ne.jsx)(cn,{children:"Nothing to display."})};return(0,ne.jsx)(g.OS,{identifier:"run-preview",axis:"horizontal",first:(0,ne.jsxs)(dn,{children:[(0,ne.jsxs)(sn,{children:[(0,ne.jsx)(an,{children:"Errors"}),C.map((function(e,n){return(0,ne.jsx)(fn,{error:e.error,onHighlight:i},n)}))]}),(y.length>0||x.length>0)&&(0,ne.jsxs)(sn,{children:[(0,ne.jsx)(an,{children:"Bulk Actions:"}),(0,ne.jsxs)(v.x,{flex:{direction:"row",alignItems:"center",gap:8},padding:{top:4},children:[y.length?(0,ne.jsx)(nn,{onRemoveExtraPaths:o,extraNodes:y}):null,x.length?(0,ne.jsx)(tn,{onScaffoldMissingConfig:l,missingNodes:x}):null]})]})]}),firstInitialPercent:50,firstMinSize:150,second:(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsxs)("div",{style:{overflowY:"scroll",width:"100%",height:"100%"},children:[(0,ne.jsxs)(pn,{children:[(0,ne.jsxs)(sn,{children:[(0,ne.jsx)(an,{children:"Runtime"}),(0,ne.jsx)(ln,{children:N([],Object.keys(E).map((function(e){return{name:e,isRequired:!1}})))})]}),((null===w||void 0===w?void 0:w.fields.length)||0)>0&&(0,ne.jsxs)(sn,{children:[(0,ne.jsx)(an,{children:"Resources"}),(0,ne.jsx)(ln,{children:N(["resources"],(null===w||void 0===w?void 0:w.fields)||[])})]})]}),(0,ne.jsxs)(sn,{children:[(0,ne.jsx)(an,{children:"Ops"}),(0,ne.jsx)(ln,{children:N([P?"ops":"solids"],(P?null===b||void 0===b?void 0:b.fields:null===S||void 0===S?void 0:S.fields)||[])})]}),(0,ne.jsx)("div",{style:{height:50}})]}),(0,ne.jsx)("div",{style:{position:"absolute",top:0,right:0,padding:"12px 15px 0px 10px",background:"rgba(255,255,255,0.7)"},children:(0,ne.jsx)(Je.X,{label:"Errors Only",checked:f,onChange:function(){return m(!f)}})})]})})},rn=(0,f.Ps)(ge||(ge=(0,i.Z)(["\n  fragment RunPreviewValidationFragment on PipelineConfigValidationResult {\n    __typename\n    ... on RunConfigValidationInvalid {\n      errors {\n        __typename\n        reason\n        message\n        stack {\n          entries {\n            __typename\n            ... on EvaluationStackPathEntry {\n              fieldName\n            }\n            ... on EvaluationStackListItemEntry {\n              listIndex\n            }\n            ... on EvaluationStackMapKeyEntry {\n              mapKey\n            }\n            ... on EvaluationStackMapValueEntry {\n              mapKey\n            }\n          }\n        }\n        ... on MissingFieldConfigError {\n          field {\n            name\n          }\n        }\n        ... on MissingFieldsConfigError {\n          fields {\n            name\n          }\n        }\n        ... on FieldNotDefinedConfigError {\n          fieldName\n        }\n        ... on FieldsNotDefinedConfigError {\n          fieldNames\n        }\n      }\n    }\n    ... on PipelineNotFoundError {\n      message\n    }\n    ... on InvalidSubsetError {\n      message\n    }\n    ...PythonErrorFragment\n  }\n\n  ","\n"])),_.Bq),an=c.ZP.div.withConfig({displayName:"RunPreview__SectionTitle",componentId:"sc-1d5bfcs-0"})(["color:",";text-transform:uppercase;font-size:12px;margin-bottom:8px;"],y.w.Gray400),sn=c.ZP.div.withConfig({displayName:"RunPreview__Section",componentId:"sc-1d5bfcs-1"})(["margin-top:14px;margin-left:10px;"]),ln=c.ZP.div.withConfig({displayName:"RunPreview__ItemSet",componentId:"sc-1d5bfcs-2"})(["display:flex;flex-direction:row;flex-wrap:wrap;gap:4px;"]),cn=c.ZP.div.withConfig({displayName:"RunPreview__ItemsEmptyNotice",componentId:"sc-1d5bfcs-3"})(["font-size:13px;padding-top:7px;padding-bottom:7px;"]),dn=c.ZP.div.withConfig({displayName:"RunPreview__ErrorListContainer",componentId:"sc-1d5bfcs-4"})(["margin-left:10px;overflow-y:scroll;height:100%;"]),un=c.ZP.div.withConfig({displayName:"RunPreview__ErrorRowContainer",componentId:"sc-1d5bfcs-5"})(["text-align:left;font-size:13px;white-space:pre-wrap;word-break:break-word;display:flex;flex-direction:row;align-items:flex-start;border-bottom:1px solid #ccc;padding:7px 0;padding-right:7px;margin-bottom:8px;&:last-child{border-bottom:0;margin-bottom:15px;}",""],(function(e){return e.hoverable&&"&:hover {\n      background: ".concat(y.w.Gray50,";\n    }\n  ")})),pn=c.ZP.div.withConfig({displayName:"RunPreview__RuntimeAndResourcesSection",componentId:"sc-1d5bfcs-6"})(["display:flex;gap:12px;@media (max-width:800px){flex-direction:column;}"]),fn=function(e){var n=e.error,t=e.onHighlight,i=n,o=null;Xe(n)&&(i=n.message,o=n);var r=i;return"string"===typeof i&&i.length>400&&(r=function(e){var n=e.indexOf("{");-1===n&&(n=e.indexOf(". "));-1===n&&(n=400);return e.substr(0,n)+"... "}(i)),(0,ne.jsxs)(un,{hoverable:!!o,onClick:function(){return o&&t(ce(o.stack.entries))},children:[(0,ne.jsx)("div",{style:{paddingRight:4},children:(0,ne.jsx)(h.JO,{name:"error",color:y.w.Red500})}),(0,ne.jsxs)("div",{children:[r,r!==i&&(0,ne.jsxs)(ne.Fragment,{children:["\xa0",(0,ne.jsx)(Ye.Z,{onClick:function(){return(0,k._)({body:(0,ne.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:i})})},children:"View all"})]})]})]})};function gn(e,n){if(!n||"object"!==typeof n)return!1;if(0===e.length)return!0;var t=(0,Be.Z)(e),i=t[0];return gn(t.slice(1),n[i])}var mn,hn,vn,yn=t(92059),xn=t(83305),Cn=t(33367),An=function e(n,t){var i=t[n];switch(i.__typename){case"CompositeConfigType":if(i.isSelector)return"<selector>";var o,r={},s=(0,a.Z)(i.fields);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=l.name,d=l.isRequired,u=l.configTypeKey;d&&(r[c]=e(u,t))}}catch(p){s.e(p)}finally{s.f()}return r;case"ArrayConfigType":return[];case"MapConfigType":return{};case"NullableConfigType":return e(i.typeParamKeys[0],t);case"EnumConfigType":return i.values.map((function(e){return e.value})).join("|");case"ScalarUnionConfigType":return e(i.scalarTypeKey,t);case"RegularConfigType":return{String:"",Int:0,Bool:!0,Any:"AnyType"}[i.key];default:(0,Cn.UT)(i)}},wn=function(e){var n=e.allConfigTypes,t=e.rootConfigType,i=function(e){var n,t={},i=(0,a.Z)(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;t[o.key]=o}}catch(r){i.e(r)}finally{i.f()}return t}(n);return An(t.key,i)},bn="The YAML you provided couldn't be parsed. Please fix the syntax errors and try again.",jn=function(e,n){switch(n.type){case"preview-loading":return(0,l.Z)((0,l.Z)({},e),{},{previewLoading:n.payload});case"set-preview":var t=n.payload,i=t.preview,o=t.previewedDocument,r=t.previewLoading;return(0,l.Z)((0,l.Z)({},e),{},{preview:i,previewedDocument:o,previewLoading:r});case"toggle-tag-editor":return(0,l.Z)((0,l.Z)({},e),{},{tagEditorOpen:n.payload});case"toggle-config-loading":return(0,l.Z)((0,l.Z)({},e),{},{configLoading:n.payload});case"set-editor-help-context":return(0,l.Z)((0,l.Z)({},e),{},{editorHelpContext:n.payload});default:return e}},Sn={preview:null,previewLoading:!1,previewedDocument:null,configLoading:!1,editorHelpContext:null,tagEditorOpen:!1},kn=function(e){var n,t,i=e.partitionSets,c=e.pipeline,d=e.repoAddress,f=(0,p.useApolloClient)(),C=j.useReducer(jn,Sn),w=(0,s.Z)(C,2),N=w[0],R=w[1],Z=j.useRef(!1),I=j.useRef(null),O=j.useRef(null),M=j.useRef(0),T=(0,he.U)("launchpad-whitespace",(function(e){return"boolean"!==typeof e||e})),F=(0,s.Z)(T,2),K=F[0],L=F[1],D=c.isJob,G=c.presets,V=j.useMemo((function(){var e=D?G.length?[G[0]]:[]:G,n=i.results;return 1===e.length&&0===n.length?{base:{presetName:e[0].name,tags:null},runConfigYaml:e[0].runConfigYaml}:e.length||1!==n.length?{}:{base:{partitionsSetName:n[0].name,partitionName:null,tags:null}}}),[D,i.results,G]),H=(0,E.aC)(d,c.name,V),z=(0,s.Z)(H,2),B=z[0],Q=z[1],U=B.sessions[B.current],Y=j.useMemo((function(){return U.tags||[]}),[U]),q=(0,l.Z)((0,l.Z)({},(0,ye.$)(d)),{},{pipelineName:c.name,solidSelection:(null===U||void 0===U?void 0:U.solidSelection)||void 0}),$=(0,p.useQuery)(Zn,{variables:{selector:q,mode:null===U||void 0===U?void 0:U.mode},fetchPolicy:"cache-and-network",partialRefetch:!0}),J=null===$||void 0===$||null===(n=$.data)||void 0===n?void 0:n.runConfigSchemaOrError;j.useEffect((function(){return Z.current=!0,function(){Z.current=!1}}));var W=function(e){Q((0,E.sU)(B,B.current,e))},X="RunConfigSchema"===(null===J||void 0===J?void 0:J.__typename)?J:void 0,ee="ModeNotFoundError"===(null===J||void 0===J?void 0:J.__typename)?J:void 0,te=function(){var e=(0,o.Z)(u().mark((function e(n){var t,i,o,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M.current+=1,t=M.current,R({type:"preview-loading",payload:!0}),e.next=5,f.query({fetchPolicy:"no-cache",query:Pn,variables:{runConfigData:n,pipeline:q,mode:U.mode||"default"}});case 5:return i=e.sent,o=i.data,Z.current&&(r=t===M.current,R({type:"set-preview",payload:{preview:o,previewedDocument:n,previewLoading:!r&&N.previewLoading}})),e.abrupt("return",de(n,o.isPipelineConfigValid));case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ie=function(e){var n=U.base?Y.filter((function(n){var t,i;return(null===(t=U.base)||void 0===t?void 0:t.tags)&&!(null!==(i=U.base)&&void 0!==i&&i.tags.some((function(e){return e.key===n.key&&e.value===n.value})))&&!e.some((function(e){return e.key===n.key}))})):[];return[].concat((0,r.Z)(e),(0,r.Z)(n))},oe=function(){var e=(0,o.Z)(u().mark((function e(n){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.tags.map(En),W({base:{presetName:n.name,tags:t},name:n.name,runConfigYaml:n.runConfigYaml||"",solidSelection:n.solidSelection,solidSelectionQuery:null===n.solidSelection?"*":n.solidSelection.join(","),mode:n.mode,tags:ie(t),needsRefresh:!1});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),re=function(){var e=(0,o.Z)(u().mark((function e(n,t,i,o){var r,a,s,l,c,d,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce(),e.prev=1,r=U.base,e.next=5,f.query({query:xe.Fp,variables:{repositorySelector:n,partitionSetName:t,partitionName:i}});case 5:if(a=e.sent,(s=a.data)&&s.partitionSetOrError&&"PartitionSet"===s.partitionSetOrError.__typename&&s.partitionSetOrError.partition){e.next=10;break}return ue(),e.abrupt("return");case 10:l=s.partitionSetOrError.partition,c=[],"PythonError"===l.tagsOrError.__typename?(0,k._)({body:(0,ne.jsx)(_.T9,{error:l.tagsOrError})}):c=l.tagsOrError.results.map(En),"PythonError"===l.runConfigOrError.__typename?(d="",(0,k._)({body:(0,ne.jsx)(_.T9,{error:l.runConfigOrError})})):d=l.runConfigOrError.yaml,p=o||l.solidSelection,W({name:l.name,base:Object.assign({},r,{partitionName:l.name,tags:c}),runConfigYaml:d,solidSelection:p,solidSelectionQuery:null===p?"*":p.join(","),mode:l.mode,tags:ie(c),needsRefresh:!1}),e.next=20;break;case 18:e.prev=18,e.t0=e.catch(1);case 20:ue();case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(n,t,i,o){return e.apply(this,arguments)}}(),se=function(){var e=(0,o.Z)(u().mark((function e(n){var t,i,o,r,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("presetName"in n)){e.next=5;break}return t=n.presetName,(i=c.presets.find((function(e){return e.name===t})))&&oe((0,l.Z)((0,l.Z)({},i),{},{solidSelection:U.solidSelection||i.solidSelection})),e.abrupt("return");case 5:if(o=n.partitionName,r=n.partitionsSetName,a=(0,ye.$)(d),!o){e.next=12;break}return ce(),e.next=11,re(a,r,o,U.solidSelection);case 11:ue();case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),le=function(){return R({type:"toggle-tag-editor",payload:!0})},ce=function(){return R({type:"toggle-config-loading",payload:!0})},ue=function(){return R({type:"toggle-config-loading",payload:!1})},pe=N.preview,fe=N.previewLoading,ge=N.previewedDocument,Ce=N.configLoading,we=N.editorHelpContext,be=N.tagEditorOpen,je=j.useMemo((function(){var e=U.base,n=U.needsRefresh;return e&&n&&("presetName"in e||e.partitionsSetName&&e.partitionName)?e:null}),[U]);return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(Re,{data:B,onCreate:function(){Q((0,E.f0)(B,V))},onSave:Q}),(0,ne.jsx)(g.OS,{axis:"vertical",identifier:"execution",firstMinSize:100,firstInitialPercent:75,first:(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(Me.f,{isLoading:Ce,message:"Generating configuration..."}),(0,ne.jsxs)(yn.a,{children:[(0,ne.jsx)(xe.KC,{pipeline:c,partitionSets:i.results,base:U.base,onSaveSession:W,onSelectPreset:oe,onSelectPartition:re,repoAddress:d}),(0,ne.jsx)(Nn,{}),(0,ne.jsx)(He,{serverProvidedSubsetError:"InvalidSubsetError"===(null===pe||void 0===pe?void 0:pe.isPipelineConfigValid.__typename)?pe.isPipelineConfigValid:void 0,pipelineName:c.name,value:U.solidSelection||null,query:U.solidSelectionQuery||null,onChange:function(e,n){W({solidSelection:e,solidSelectionQuery:n})},flattenGraphs:U.flattenGraphs,onFlattenGraphsChange:function(e){W({flattenGraphs:e})},repoAddress:d}),D?(0,ne.jsx)("span",{}):(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(Nn,{}),(0,ne.jsx)(Ee,{modes:c.modes,modeError:ee,onModeChange:function(e){W({mode:e})},modeName:U.mode})]}),(0,ne.jsx)(xn.U,{tagsFromDefinition:c.tags,tagsFromSession:Y,onChange:function(e){var n={},t=[];e.forEach((function(e){e.key in n||(n[e.key]=e.value,t.push(e))})),W({tags:t})},open:be,onRequestClose:function(){return R({type:"toggle-tag-editor",payload:!1})}}),(0,ne.jsx)("div",{style:{flex:1}}),Y.length?null:(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(P.b,{shortcutLabel:"\u2325T",shortcutFilter:function(e){return"KeyT"===e.code&&e.altKey},onShortcut:le,children:(0,ne.jsx)(m.zx,{onClick:le,icon:(0,ne.jsx)(h.JO,{name:"add_circle"}),children:"Add tags"})}),(0,ne.jsx)(Nn,{})]}),(0,ne.jsx)(m.zx,{title:"Toggle whitespace",icon:(0,ne.jsx)(h.JO,{name:"toggle_whitespace"}),active:K,onClick:function(){return L((function(e){return void 0===e||!e}))}}),(0,ne.jsx)(Nn,{}),(0,ne.jsx)(g.Uj,{axis:"horizontal",container:O})]}),c.tags.length||Y.length?(0,ne.jsx)(v.x,{padding:{vertical:8,left:12,right:0},border:{side:"bottom",width:1,color:y.w.Gray200},children:(0,ne.jsx)(xn.x,{tagsFromDefinition:c.tags,tagsFromSession:Y,onRequestEdit:le})}):null,je?(0,ne.jsx)(v.x,{padding:{vertical:8,horizontal:12},border:{side:"bottom",width:1,color:y.w.Gray200},children:(0,ne.jsxs)(x.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,ne.jsx)(h.JO,{name:"warning",color:y.w.Yellow500}),(0,ne.jsx)("div",{children:"Your repository has been manually refreshed, and this configuration may now be out of date."}),(0,ne.jsx)(m.zx,{intent:"primary",onClick:function(){return se(je)},disabled:N.configLoading,children:"Refresh config"}),(0,ne.jsx)(m.zx,{onClick:function(){W({needsRefresh:!1})},children:"Dismiss"})]})}):null,(0,ne.jsx)(g.OS,{ref:O,axis:"horizontal",identifier:"execution-editor",firstMinSize:100,firstInitialPercent:70,first:(0,ne.jsx)(ae,{ref:I,readOnly:!1,runConfigSchema:X,configCode:U.runConfigYaml,onConfigChange:function(e){W({runConfigYaml:e})},onHelpContextChange:function(e){me(we,e)||R({type:"set-editor-help-context",payload:e})},showWhitespace:K,checkConfig:te}),second:(0,ne.jsx)(Ae,{context:we,allInnerTypes:(null===X||void 0===X?void 0:X.allConfigTypes)||[]})})]}),second:(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(Me.f,{isLoading:fe,message:X?"Checking config...":"Loading config schema..."}),(0,ne.jsx)(on,{document:ge,validation:pe?pe.isPipelineConfigValid:null,solidSelection:U.solidSelection,runConfigSchema:X,onHighlightPath:function(e){var n;return null===(n=I.current)||void 0===n?void 0:n.moveCursorToPath(e)},onRemoveExtraPaths:function(e){return function(e){var n={};try{n=S.Qc(U.runConfigYaml||"")||{};var t,i=(0,a.Z)(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;_n(n,o)}}catch(r){i.e(r)}finally{i.f()}W({runConfigYaml:S.Pz(n)})}catch(r){return void(0,k._)({title:"Invalid YAML",body:bn})}}(e)},onScaffoldMissingConfig:function(){var e=X?wn(X):{};try{var n=S.Qc(U.runConfigYaml||"")||{},t=A()(e,n),i=S.Pz(t);W({runConfigYaml:i})}catch(o){(0,k._)({title:"Invalid YAML",body:bn})}}})]})}),(0,ne.jsx)("div",{style:{position:"absolute",bottom:12,right:12,zIndex:1},children:(0,ne.jsx)(_e.c,{pipelineName:c.name,getVariables:function(){var e,n;if(U){var t={};try{t=S.Qc(U.runConfigYaml||"")||{}}catch(i){return void(0,k._)({title:"Invalid YAML",body:bn})}return{executionParams:{runConfigData:t,selector:q,mode:U.mode||"default",executionMetadata:{tags:b()([].concat((0,r.Z)(U.solidSelectionQuery?[{key:ve.HJ.SolidSelection,value:U.solidSelectionQuery}]:[]),(0,r.Z)(null!==U&&void 0!==U&&null!==(e=U.base)&&void 0!==e&&e.presetName?[{key:ve.HJ.PresetName,value:null===U||void 0===U||null===(n=U.base)||void 0===n?void 0:n.presetName}]:[]),(0,r.Z)(Y.map(En)),(0,r.Z)(c.tags.map(En))),(function(e){return e.key}))}}}}},disabled:"PipelineConfigValidationValid"!==(null===pe||void 0===pe||null===(t=pe.isPipelineConfigValid)||void 0===t?void 0:t.__typename),behavior:"open"})})]})},En=function(e){return{key:e.key,value:e.value}},_n=function(e,n){for(var t=n.split("."),i=0;i<t.length-1;i++)if("undefined"===typeof(e=e[t[i]]))return;var o=t.pop();o&&delete e[o]},Pn=(0,f.Ps)(mn||(mn=(0,i.Z)(["\n  query PreviewConfigQuery(\n    $pipeline: PipelineSelector!\n    $runConfigData: RunConfigData!\n    $mode: String!\n  ) {\n    isPipelineConfigValid(pipeline: $pipeline, runConfigData: $runConfigData, mode: $mode) {\n      ...ConfigEditorValidationFragment\n      ...RunPreviewValidationFragment\n    }\n  }\n  ","\n  ","\n"])),rn,le),Nn=c.ZP.div.withConfig({displayName:"LaunchpadSessionContainer__SessionSettingsSpacer",componentId:"sc-1uq6nf9-0"})(["width:5px;"]),Rn=(0,f.Ps)(hn||(hn=(0,i.Z)(["\n  fragment LaunchpadSessionContainerRunConfigSchemaFragment on RunConfigSchemaOrError {\n    __typename\n    ... on RunConfigSchema {\n      ...ConfigEditorRunConfigSchemaFragment\n    }\n    ... on ModeNotFoundError {\n      message\n    }\n  }\n  ","\n"])),se),Zn=(0,f.Ps)(vn||(vn=(0,i.Z)(["\n  query PipelineExecutionConfigSchemaQuery($selector: PipelineSelector!, $mode: String) {\n    runConfigSchemaOrError(selector: $selector, mode: $mode) {\n      ...LaunchpadSessionContainerRunConfigSchemaFragment\n    }\n  }\n\n  ","\n"])),Rn)}}]);
//# sourceMappingURL=204.c5c84fdf.chunk.js.map