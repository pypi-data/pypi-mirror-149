define("mockup-utils",["jquery"],function(u){"use strict";function t(t){var a=this;return a.className="plone-loader",t=t||{},a.options=u.extend({},{backdrop:null,zIndex:10005},t),a.init=function(){a.$el=u("."+a.className),0===a.$el.length&&(a.$el=u("<div><div></div></div>"),a.$el.addClass(a.className).hide().appendTo("body"))},a.show=function(t){a.init(),a.$el.show();var r=a.options.zIndex;"function"==typeof r?r=Math.max(r(),10005):(r=10005,u(".plone-modal-wrapper,.plone-modal-backdrop").each(function(){r=Math.max(r,u(this).css("zIndex")||10005)}),r+=1),a.$el.css("zIndex",r),void 0===t&&(t=!0),a.options.backdrop&&(a.options.backdrop.closeOnClick=t,a.options.backdrop.closeOnEsc=t,a.options.backdrop.init(),a.options.backdrop.show())},a.hide=function(){a.init(),a.$el.hide()},a}function e(t){return void 0===t&&(t="id"),t+Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var r={get:function(t){if(window.localStorage){var r=window.localStorage[t];return"string"==typeof r?JSON.parse(r):void 0}},set:function(t,r){window.localStorage&&(window.localStorage[t]=JSON.stringify(r))}};return{bool:function(t){return"string"==typeof t&&(t=u.trim(t).toLowerCase()),-1===["false",!1,"0",0,"",void 0,null].indexOf(t)},escapeHTML:function(t){return u("<div/>").text(t).html()},removeHTML:function(t){return t.replace(/<[^>]+>/gi,"")},featureSupport:{dragAndDrop:function(){return"draggable"in document.createElement("span")},fileApi:function(){return"undefined"!=typeof FileReader},history:function(){return!(!window.history||!window.history.pushState)}},generateId:e,getAuthenticator:function(){var t=u('input[name="_authenticator"]');return 0===t.length?0<(t=u('a[href*="_authenticator"]')).length?t.attr("href").split("_authenticator=")[1]:"":t.val()},getWindow:function(){var t=window;return t.parent!==window&&(t=t.parent),t},Loading:t,loading:new t,parseBodyTag:function(t){return u(/<body[^>]*>[^]*<\/body>/im.exec(t)[0].replace("<body","<div").replace("</body>","</div>")).eq(0).html()},QueryHelper:function(t){var p=this;return p.options=u.extend({},{pattern:null,vocabularyUrl:null,searchParam:"SearchableText",pathOperator:"plone.app.querystring.operation.string.path",attributes:["UID","Title","Description","getURL","portal_type"],batchSize:10,baseCriteria:[],sort_on:"is_folderish",sort_order:"reverse",pathDepth:1},t),p.pattern=p.options.pattern,void 0!==p.pattern&&null!==p.pattern||(p.pattern={browsing:!1,basePath:"/"}),p.options.url&&!p.options.vocabularyUrl?p.options.vocabularyUrl=p.options.url:p.pattern.vocabularyUrl&&(p.options.vocabularyUrl=p.pattern.vocabularyUrl),p.valid=Boolean(p.options.vocabularyUrl),p.getBatch=function(t){return{page:t||1,size:p.options.batchSize}},p.getCurrentPath=function(){var t,r=p.pattern;"function"==typeof(t=p.currentPath?p.currentPath:r.currentPath)&&(t=t());var a=t;return a=a||(r.basePath?r.basePath:r.options.basePath?r.options.basePath:"/")},p.getCriterias=function(t,r){void 0===r&&(r={});var a=[];return(r=u.extend({},{useBaseCriteria:!0,additionalCriterias:[]},r)).useBaseCriteria&&(a=p.options.baseCriteria.slice(0)),t&&(t+="*",a.push({i:p.options.searchParam,o:"plone.app.querystring.operation.string.contains",v:t})),r.searchPath?a.push({i:"path",o:p.options.pathOperator,v:r.searchPath+"::"+p.options.pathDepth}):p.pattern.browsing&&a.push({i:"path",o:p.options.pathOperator,v:p.getCurrentPath()+"::"+p.options.pathDepth}),a=a.concat(r.additionalCriterias)},p.getQueryData=function(t,r){var a={query:JSON.stringify({criteria:p.getCriterias(t),sort_on:p.options.sort_on,sort_order:p.options.sort_order}),attributes:JSON.stringify(p.options.attributes)};return r&&(a.batch=JSON.stringify(p.getBatch(r))),a},p.getUrl=function(){var t=p.options.vocabularyUrl;return-1===t.indexOf("?")?t+="?":t+="&",t+u.param(p.getQueryData())},p.selectAjax=function(){return{url:p.options.vocabularyUrl,dataType:"JSON",quietMillis:100,data:function(t,r){return p.getQueryData(t,r)},results:function(t,r){var a=10*r<t.total;return{results:t.results,more:a}}}},p.search=function(t,r,a,e,o,n){void 0===o&&(o=!0),void 0===n&&(n="GET");var i=[];o&&(i=p.options.baseCriteria.slice(0)),i.push({i:t,o:r,v:a});var s={query:JSON.stringify({criteria:i}),attributes:JSON.stringify(p.options.attributes)};u.ajax({url:p.options.vocabularyUrl,dataType:"JSON",data:s,type:n,success:e})},p},setId:function(t,r){void 0===r&&(r="id");var a=t.attr("id");return a=void 0===a?e(r):a.replace(/\./g,"-"),t.attr("id",a),a},storage:r}}),require(["jquery","mockup-utils"],function(e,o){e(document).ready(function(){var a=e("body").attr("data-portal-url");e.get(a+"/shopping-cart",function(t){e(".jaz-shop-cart-wrapper").replaceWith(t)},"html"),e(document).on("click",".jaz-shop-add",function(t){t.preventDefault();var r=e(this).attr("data-uid");e.post(a+"/shopping-cart",{add:r,_authenticator:o.getAuthenticator()},function(t){e(".jaz-shop-cart-wrapper").replaceWith(t)},"html")}),e.get(a+"/@@jazkarta_shop_portletdata",function(t){e(".jaz-shop-cart-portlet-wrapper").replaceWith(t)},"html"),e.get(a+"/@@jazkarta_shop_portletdata?query=cart_size",function(t){"0"==t?e(".jazkarta-cart-portlet").hide():(e(".jazkarta-cart-portlet").show(),e(".jazkarta-shop-portlet-cartsize").replaceWith(t))},"html")})}),define("/home/plone/Plone/zinstance/src/jazkarta.shop/jazkarta/shop/browser/static/shop.js",function(){});
//# sourceMappingURL=shop-compiled.js.map
