var Ye=Object.defineProperty,Je=Object.defineProperties;var Ge=Object.getOwnPropertyDescriptors;var ye=Object.getOwnPropertySymbols;var Ke=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable;var Ie=(l,e,t)=>e in l?Ye(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,Se=(l,e)=>{for(var t in e||(e={}))Ke.call(e,t)&&Ie(l,t,e[t]);if(ye)for(var t of ye(e))Qe.call(e,t)&&Ie(l,t,e[t]);return l},Ce=(l,e)=>Je(l,Ge(e));import{S as N,i as X,s as Y,e as M,F as U,a as g,b as v,n as j,h as k,z as J,T as _e,B as H,R as L,l as A,r as Fe,k as B,a3 as Ve,f as E,a6 as Ze,m as xe,C as $e,o as T,q as z,u as p,v as w,w as D,t as ee,x as ne,y as le,j as he,H as Ae,E as Le,d as x,g as ue,I as et,X as tt,D as fe}from"./index.48448e6d.js";import{B as Oe}from"./BlockLabel.41c28e38.js";import{C as nt,i as lt,I as it,W as at}from"./Image.svelte_svelte_type_style_lang.6e413de3.js";import{I as Me,M as st}from"./ModifyUpload.dcc91944.js";import{U as rt}from"./Upload.254f1897.js";import{B as ot}from"./Block.20c015b6.js";import{S as ut}from"./StatusTracker.e2c3be5c.js";import{E as fn}from"./Image.8c15c7ca.js";import"./_commonjsHelpers.80d8c10d.js";var te="./assets/image.45facf29.svg",Ee="./assets/edit.8ee16a39.svg";function ft(l){let e,t;return{c(){e=M("img"),U(e.src,t=l[0])||g(e,"src",t),g(e,"alt","")},m(n,i){v(n,e,i),l[2](e)},p(n,[i]){i&1&&!U(e.src,t=n[0])&&g(e,"src",t)},i:j,o:j,d(n){n&&k(e),l[2](null)}}}function ct(l,e,t){let{image:n}=e,i;const o=J();_e(()=>{const r=new nt(i,{autoCropArea:1,cropend(){const s=r.getCroppedCanvas().toDataURL();o("crop",s)}});return o("crop",n),()=>{r.destroy()}});function a(r){H[r?"unshift":"push"](()=>{i=r,t(1,i)})}return l.$$set=r=>{"image"in r&&t(0,n=r.image)},[n,i,a]}class dt extends N{constructor(e){super(),X(this,e,ct,ft,Y,{image:0})}}class Te{constructor(e,t){this.x=e,this.y=t}}class ze extends Te{update(e){this.x=e.x,this.y=e.y}moveByAngle(e,t){const n=e+Math.PI/2;this.x=this.x+Math.sin(n)*t,this.y=this.y-Math.cos(n)*t}equalsTo(e){return this.x===e.x&&this.y===e.y}getDifferenceTo(e){return new Te(this.x-e.x,this.y-e.y)}getDistanceTo(e){const t=this.getDifferenceTo(e);return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}getAngleTo(e){const t=this.getDifferenceTo(e);return Math.atan2(t.y,t.x)}toObject(){return{x:this.x,y:this.y}}}const _t=30;class ht{constructor({radius:e=_t,enabled:t=!0,initialPoint:n={x:0,y:0}}={}){this.radius=e,this._isEnabled=t,this.pointer=new ze(n.x,n.y),this.brush=new ze(n.x,n.y),this.angle=0,this.distance=0,this._hasMoved=!1}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}isEnabled(){return this._isEnabled}setRadius(e){this.radius=e}getRadius(){return this.radius}getBrushCoordinates(){return this.brush.toObject()}getPointerCoordinates(){return this.pointer.toObject()}getBrush(){return this.brush}getPointer(){return this.pointer}getAngle(){return this.angle}getDistance(){return this.distance}brushHasMoved(){return this._hasMoved}update(e,{both:t=!1}={}){return this._hasMoved=!1,this.pointer.equalsTo(e)&&!t?!1:(this.pointer.update(e),t?(this._hasMoved=!0,this.brush.update(e),!0):(this._isEnabled?(this.distance=this.pointer.getDistanceTo(this.brush),this.angle=this.pointer.getAngleTo(this.brush),this.distance>this.radius&&(this.brush.moveByAngle(this.angle,this.distance-this.radius),this._hasMoved=!0)):(this.distance=0,this.angle=0,this.brush.update(e),this._hasMoved=!0),!0))}}function De(l,e,t){const n=l.slice();return n[40]=e[t].name,n[41]=e[t].zIndex,n[42]=e,n[43]=t,n}function Re(l){let e;return{c(){e=M("div"),e.textContent="Start drawing",g(e,"class","absolute inset-0 flex items-center justify-center z-40 pointer-events-none touch-none text-gray-400 md:text-xl")},m(t,n){v(t,e,n)},d(t){t&&k(e)}}}function je(l){let e,t,n=l[40],i,o;const a=()=>l[14](e,n),r=()=>l[14](null,n);return{c(){e=M("canvas"),g(e,"key",t=l[40]),L(e,"display","block"),L(e,"position","absolute"),L(e,"z-index",l[41]),L(e,"width",l[0]+"px"),L(e,"height",l[1]+"px")},m(s,f){v(s,e,f),a(),i||(o=[A(e,"mousedown",l[40]==="interface"?l[6]:void 0),A(e,"mousemove",l[40]==="interface"?l[7]:void 0),A(e,"mouseup",l[40]==="interface"?l[8]:void 0),A(e,"mouseout",l[40]==="interface"?l[8]:void 0),A(e,"touchstart",l[40]==="interface"?l[6]:void 0),A(e,"touchmove",l[40]==="interface"?l[7]:void 0),A(e,"touchend",l[40]==="interface"?l[8]:void 0),A(e,"touchcancel",l[40]==="interface"?l[8]:void 0)],i=!0)},p(s,f){l=s,f[0]&1&&L(e,"width",l[0]+"px"),f[0]&2&&L(e,"height",l[1]+"px"),n!==l[40]&&(r(),n=l[40],a())},d(s){s&&k(e),r(),i=!1,Fe(o)}}}function gt(l){let e,t,n,i=!l[3]&&Re(),o=l[5],a=[];for(let r=0;r<o.length;r+=1)a[r]=je(De(l,o,r));return{c(){e=M("div"),i&&i.c(),t=B();for(let r=0;r<a.length;r+=1)a[r].c();g(e,"class","touch-none relative"),L(e,"height","100%"),L(e,"width","100%"),L(e,"background-color",mt),Ve(()=>l[16].call(e))},m(r,s){v(r,e,s),i&&i.m(e,null),E(e,t);for(let f=0;f<a.length;f+=1)a[f].m(e,null);l[15](e),n=Ze(e,l[16].bind(e))},p(r,s){if(r[3]?i&&(i.d(1),i=null):i||(i=Re(),i.c(),i.m(e,t)),s[0]&487){o=r[5];let f;for(f=0;f<o.length;f+=1){const u=De(r,o,f);a[f]?a[f].p(u,s):(a[f]=je(u),a[f].c(),a[f].m(e,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=o.length}},i:j,o:j,d(r){r&&k(e),i&&i.d(),xe(a,r),l[15](null),n()}}}let $=50,ce="#444",de="#aaa",mt="#FFF";function bt(l,e){return{x:l.x+(e.x-l.x)/2,y:l.y+(e.y-l.y)/2}}function pt(l,e,t){const n=J();let{value:i}=e,o,a=400,r=400;const s=[{name:"interface",zIndex:15},{name:"drawing",zIndex:11},{name:"temp",zIndex:12}];let f={},u={},d=[],y=[],I=!0,O=!0,q=!1,W=!1,F=!1,S=null,P=null,_=null,K=null;_e(()=>{Object.keys(f).forEach(c=>{u[c]=f[c].getContext("2d")}),S=new ht({radius:$/1.5,enabled:!0,initialPoint:{x:window.innerWidth/2,y:window.innerHeight/2}}),P=$,K=new lt((c,h)=>We(c,h)),K.observe(_),oe(),t(13,o=!0),window.setTimeout(()=>{const c=window.innerWidth/2,h=window.innerHeight/2;S.update({x:c-P/4,y:h},{both:!0}),S.update({x:c+P/4,y:h},{both:!1}),I=!0,O=!0,Q()},100)}),$e(()=>{t(13,o=!1),K.unobserve(_)});function ie(){const c=y.slice(0,-1);Q(),m({lines:c}),ve()}let ae=()=>JSON.stringify({lines:y,width:a,height:r}),se=c=>{if(typeof c!="string")throw new Error("save_data needs to be of type string!");const{lines:h,width:b,height:C}=JSON.parse(c);if(!h||typeof h.push!="function")throw new Error("save_data.lines needs to be an array!");if(Q(),b===a&&C===r)m({lines:h});else{const R=a/b,G=r/C;m({lines:h.map(V=>Ce(Se({},V),{points:V.points.map(Z=>({x:Z.x*R,y:Z.y*G})),brush_radius:V.brush_radius}))})}},m=({lines:c})=>{c.forEach(h=>{const{points:b,brush_color:C,brush_radius:R}=h;pe({points:b,brush_color:C,brush_radius:R}),d=b,we()})},Ue=c=>{c.preventDefault(),t(3,F=!0),W=!0;const{x:h,y:b}=me(c);c.touches&&c.touches.length>0&&S.update({x:h,y:b},{both:!0}),be(h,b)},ge=c=>{c.preventDefault();const{x:h,y:b}=me(c);be(h,b)},qe=c=>{c.preventDefault(),ge(c),q=!1,W=!1,we()},We=c=>{const h=ae();for(const b of c){const{width:C,height:R}=b.contentRect;re(f.interface,C,R),re(f.drawing,C,R),re(f.temp,C,R),oe({once:!0})}se(h)},re=(c,h,b)=>{c.width=h*3,c.height=b*3,c.style.width=h,c.style.height=b},me=c=>{const h=f.interface.getBoundingClientRect();let b=c.clientX,C=c.clientY;return c.changedTouches&&c.changedTouches.length>0&&(b=c.changedTouches[0].clientX,C=c.changedTouches[0].clientY),{x:b-h.left,y:C-h.top}},be=(c,h)=>{S.update({x:c*3,y:h*3});const b=!S.isEnabled();(W&&!q||b&&W)&&(q=!0,d.push(S.brush.toObject())),q&&(d.push(S.brush.toObject()),pe({points:d,brush_color:ce,brush_radius:$})),I=!0},pe=({points:c,brush_color:h,brush_radius:b})=>{u.temp.lineJoin="round",u.temp.lineCap="round",u.temp.strokeStyle=h,u.temp.clearRect(0,0,u.temp.canvas.width,u.temp.canvas.height),u.temp.lineWidth=b;let C=c[0],R=c[1];u.temp.moveTo(R.x,R.y),u.temp.beginPath();for(var G=1,V=c.length;G<V;G++){var Z=bt(C,R);u.temp.quadraticCurveTo(C.x,C.y,Z.x,Z.y),C=c[G],R=c[G+1]}u.temp.lineTo(C.x,C.y),u.temp.stroke()},we=()=>{if(d.length<2)return;y.push({points:[...d],brush_color:ce,brush_radius:$}),d.length=0;const c=f.temp.width,h=f.temp.height;u.drawing.drawImage(f.temp,0,0,c,h),u.temp.clearRect(0,0,c,h),ve()},ve=()=>{n("change",ke())};function Q(){t(3,F=!1),y=[],O=!0,u.drawing.clearRect(0,0,f.drawing.width,f.drawing.height),u.temp.clearRect(0,0,f.temp.width,f.temp.height),u.drawing.fillStyle="#FFFFFF",u.drawing.fillRect(0,0,f.drawing.width,f.drawing.height)}let oe=({once:c=!1}={})=>{if(I||O){const h=S.getPointerCoordinates(),b=S.getBrushCoordinates();Pe(u.interface,h,b),I=!1,O=!1}c||window.requestAnimationFrame(()=>{oe()})},Pe=(c,h,b)=>{c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.fillStyle=ce,c.arc(b.x,b.y,$/2,0,Math.PI*2,!0),c.fill(),c.beginPath(),c.fillStyle=de,c.arc(h.x,h.y,4,0,Math.PI*2,!0),c.fill(),S.isEnabled()&&(c.beginPath(),c.lineWidth=2,c.lineCap="round",c.setLineDash([2,4]),c.strokeStyle=de,c.stroke()),c.beginPath(),c.fillStyle=de,c.arc(b.x,b.y,2,0,Math.PI*2,!0),c.fill()};function ke(){return f.drawing.toDataURL("image/png")}function He(c,h){H[c?"unshift":"push"](()=>{f[h]=c,t(2,f)})}function Ne(c){H[c?"unshift":"push"](()=>{_=c,t(4,_)})}function Xe(){a=this.offsetWidth,r=this.offsetHeight,t(0,a),t(1,r)}return l.$$set=c=>{"value"in c&&t(9,i=c.value)},l.$$.update=()=>{l.$$.dirty[0]&8704&&o&&!i&&Q()},[a,r,f,F,_,s,Ue,ge,qe,i,ie,Q,ke,o,He,Ne,Xe]}class wt extends N{constructor(e){super(),X(this,e,pt,gt,Y,{value:9,undo:10,clear:11,get_image_data:12},null,[-1,-1])}get undo(){return this.$$.ctx[10]}get clear(){return this.$$.ctx[11]}get get_image_data(){return this.$$.ctx[12]}}var vt="./assets/undo.f4cff58b.svg",kt="./assets/clear.88e065e8.svg";function yt(l){let e,t,n,i,o;return t=new Me({props:{image:vt,alt:"undo sketch"}}),t.$on("click",l[1]),i=new Me({props:{image:kt,alt:"clear sketch"}}),i.$on("click",l[2]),{c(){e=M("div"),T(t.$$.fragment),n=B(),T(i.$$.fragment),g(e,"class","z-50 top-2 right-2 justify-end flex gap-1 absolute")},m(a,r){v(a,e,r),z(t,e,null),E(e,n),z(i,e,null),o=!0},p:j,i(a){o||(p(t.$$.fragment,a),p(i.$$.fragment,a),o=!0)},o(a){w(t.$$.fragment,a),w(i.$$.fragment,a),o=!1},d(a){a&&k(e),D(t),D(i)}}}function It(l){const e=J();return[e,()=>e("undo"),()=>e("clear")]}class St extends N{constructor(e){super(),X(this,e,It,yt,Y,{})}}function Ct(l){let e,t,n,i,o,a,r,s,f;return{c(){e=M("div"),t=M("div"),n=M("button"),n.textContent="Save",i=B(),o=M("button"),o.textContent="Cancel",a=B(),r=M("div"),g(t,"class","image_editor_buttons"),g(e,"class","fixed w-screen h-screen top-0 left-0 bg-black bg-opacity-50 z-40 flex flex-col justify-center items-center")},m(u,d){v(u,e,d),E(e,t),E(t,n),E(t,i),E(t,o),E(e,a),E(e,r),l[6](r),s||(f=[A(n,"click",l[4]),A(o,"click",l[5])],s=!0)},p:j,i:j,o:j,d(u){u&&k(e),l[6](null),s=!1,Fe(f)}}}function Mt(l,e,t){let{value:n}=e,i,o;const a=J();function r(){t(1,o=new it(i,{usageStatistics:!1,includeUI:{loadImage:{path:n,name:"Edit Image"},menuBarPosition:"left",uiSize:{width:"800px",height:"600px"}},cssMaxWidth:700,cssMaxHeight:500,selectionStyle:{cornerSize:20,rotatingPointOffset:70}}))}_e(r);const s=()=>a("save",o.toDataURL()),f=()=>a("cancel");function u(d){H[d?"unshift":"push"](()=>{i=d,t(0,i)})}return l.$$set=d=>{"value"in d&&t(3,n=d.value)},[i,o,a,n,s,f,u]}class Et extends N{constructor(e){super(),X(this,e,Mt,Ct,Y,{value:3})}}function Tt(l){let e,t;return{c(){e=M("img"),g(e,"class","w-full h-full object-contain svelte-i8mnhh"),U(e.src,t=l[0])||g(e,"src",t),g(e,"style",l[2]),g(e,"alt","")},m(n,i){v(n,e,i)},p(n,i){i&1&&!U(e.src,t=n[0])&&g(e,"src",t),i&4&&g(e,"style",n[2])},i:j,o:j,d(n){n&&k(e)}}}function zt(l){let e,t,n,i,o,a,r=l[10]==="edit"&&Be(l);return t=new st({props:{editable:!0}}),t.$on("edit",l[20]),t.$on("clear",l[13]),{c(){r&&r.c(),e=B(),T(t.$$.fragment),n=B(),i=M("img"),g(i,"class","w-full h-full object-contain svelte-i8mnhh"),U(i.src,o=l[0])||g(i,"src",o),g(i,"style",l[2]),g(i,"alt","")},m(s,f){r&&r.m(s,f),v(s,e,f),z(t,s,f),v(s,n,f),v(s,i,f),a=!0},p(s,f){s[10]==="edit"?r?(r.p(s,f),f&1024&&p(r,1)):(r=Be(s),r.c(),p(r,1),r.m(e.parentNode,e)):r&&(ne(),w(r,1,1,()=>{r=null}),le()),(!a||f&1&&!U(i.src,o=s[0]))&&g(i,"src",o),(!a||f&4)&&g(i,"style",s[2])},i(s){a||(p(r),p(t.$$.fragment,s),a=!0)},o(s){w(r),w(t.$$.fragment,s),a=!1},d(s){r&&r.d(s),s&&k(e),D(t,s),s&&k(n),s&&k(i)}}}function Dt(l){let e,t;return e=new dt({props:{image:l[0]}}),e.$on("crop",l[14]),{c(){T(e.$$.fragment)},m(n,i){z(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.image=n[0]),e.$set(o)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Rt(l){let e,t,n,i;const o=[Ft,Bt],a=[];function r(s,f){return s[4]==="upload"?0:s[4]==="webcam"?1:-1}return~(e=r(l))&&(t=a[e]=o[e](l)),{c(){t&&t.c(),n=he()},m(s,f){~e&&a[e].m(s,f),v(s,n,f),i=!0},p(s,f){let u=e;e=r(s),e===u?~e&&a[e].p(s,f):(t&&(ne(),w(a[u],1,1,()=>{a[u]=null}),le()),~e?(t=a[e],t?t.p(s,f):(t=a[e]=o[e](s),t.c()),p(t,1),t.m(n.parentNode,n)):t=null)},i(s){i||(p(t),i=!0)},o(s){w(t),i=!1},d(s){~e&&a[e].d(s),s&&k(n)}}}function jt(l){let e,t,n,i;e=new St({}),e.$on("undo",l[15]),e.$on("clear",l[16]);let o={value:l[0]};return n=new wt({props:o}),l[17](n),n.$on("change",l[14]),{c(){T(e.$$.fragment),t=B(),T(n.$$.fragment)},m(a,r){z(e,a,r),v(a,t,r),z(n,a,r),i=!0},p(a,r){const s={};r&1&&(s.value=a[0]),n.$set(s)},i(a){i||(p(e.$$.fragment,a),p(n.$$.fragment,a),i=!0)},o(a){w(e.$$.fragment,a),w(n.$$.fragment,a),i=!1},d(a){D(e,a),a&&k(t),l[17](null),D(n,a)}}}function Be(l){let e,t;return e=new Et({props:{value:l[0]}}),e.$on("cancel",l[19]),e.$on("save",l[14]),{c(){T(e.$$.fragment)},m(n,i){z(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.value=n[0]),e.$set(o)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Bt(l){let e,t;return e=new at({}),e.$on("capture",l[14]),{c(){T(e.$$.fragment)},m(n,i){z(e,n,i),t=!0},p:j,i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Ft(l){let e,t,n;function i(a){l[18](a)}let o={filetype:"image/x-png,image/gif,image/jpeg",include_file_metadata:!1,$$slots:{default:[At]},$$scope:{ctx:l}};return l[9]!==void 0&&(o.dragging=l[9]),e=new rt({props:o}),H.push(()=>Ae(e,"dragging",i)),e.$on("load",l[12]),{c(){T(e.$$.fragment)},m(a,r){z(e,a,r),n=!0},p(a,r){const s={};r&4194752&&(s.$$scope={dirty:r,ctx:a}),!t&&r&512&&(t=!0,s.dragging=a[9],Le(()=>t=!1)),e.$set(s)},i(a){n||(p(e.$$.fragment,a),n=!0)},o(a){w(e.$$.fragment,a),n=!1},d(a){D(e,a)}}}function At(l){let e,t,n,i,o,a,r,s,f;return{c(){e=M("div"),t=x(l[6]),n=B(),i=M("span"),o=x("- "),a=x(l[7]),r=x(" -"),s=B(),f=x(l[8]),g(i,"class","text-gray-300 svelte-i8mnhh"),g(e,"class","flex flex-col svelte-i8mnhh")},m(u,d){v(u,e,d),E(e,t),E(e,n),E(e,i),E(i,o),E(i,a),E(i,r),E(e,s),E(e,f)},p(u,d){d&64&&ue(t,u[6]),d&128&&ue(a,u[7]),d&256&&ue(f,u[8])},d(u){u&&k(e)}}}function Lt(l){let e,t,n,i,o,a;e=new Oe({props:{show_label:l[3],image:l[4]==="canvas"?Ee:te,label:l[1]||(l[4]==="canvas"?"Sketch":"Image")}});const r=[jt,Rt,Dt,zt,Tt],s=[];function f(u,d){return u[4]==="canvas"?0:u[0]===null?1:u[5]==="select"?2:u[5]==="editor"?3:4}return i=f(l),o=s[i]=r[i](l),{c(){T(e.$$.fragment),t=B(),n=M("div"),o.c(),g(n,"class","svelte-i8mnhh"),ee(n,"bg-gray-200",l[0]),ee(n,"h-60",l[4]!=="webcam")},m(u,d){z(e,u,d),v(u,t,d),v(u,n,d),s[i].m(n,null),a=!0},p(u,[d]){const y={};d&8&&(y.show_label=u[3]),d&16&&(y.image=u[4]==="canvas"?Ee:te),d&18&&(y.label=u[1]||(u[4]==="canvas"?"Sketch":"Image")),e.$set(y);let I=i;i=f(u),i===I?s[i].p(u,d):(ne(),w(s[I],1,1,()=>{s[I]=null}),le(),o=s[i],o?o.p(u,d):(o=s[i]=r[i](u),o.c()),p(o,1),o.m(n,null)),d&1&&ee(n,"bg-gray-200",u[0]),d&16&&ee(n,"h-60",u[4]!=="webcam")},i(u){a||(p(e.$$.fragment,u),p(o),a=!0)},o(u){w(e.$$.fragment,u),w(o),a=!1},d(u){D(e,u),u&&k(t),u&&k(n),s[i].d()}}}function Ot(l,e,t){let{value:n}=e,{label:i=void 0}=e,{style:o=""}=e,{show_label:a}=e,{source:r="upload"}=e,{tool:s="editor"}=e,{drop_text:f="Drop an image file"}=e,{or_text:u="or"}=e,{upload_text:d="click to upload"}=e,y="view",I;function O({detail:m}){t(0,n=m)}function q({detail:m}){t(0,n=null),F("clear")}function W({detail:m}){t(0,n=m),t(10,y="view"),F("edit")}const F=J();let S=!1;const P=()=>I.undo(),_=()=>I.clear();function K(m){H[m?"unshift":"push"](()=>{I=m,t(11,I)})}function ie(m){S=m,t(9,S)}const ae=()=>t(10,y="view"),se=()=>t(10,y="edit");return l.$$set=m=>{"value"in m&&t(0,n=m.value),"label"in m&&t(1,i=m.label),"style"in m&&t(2,o=m.style),"show_label"in m&&t(3,a=m.show_label),"source"in m&&t(4,r=m.source),"tool"in m&&t(5,s=m.tool),"drop_text"in m&&t(6,f=m.drop_text),"or_text"in m&&t(7,u=m.or_text),"upload_text"in m&&t(8,d=m.upload_text)},l.$$.update=()=>{l.$$.dirty&1&&F("change",n),l.$$.dirty&512&&F("drag",S)},[n,i,o,a,r,s,f,u,d,S,y,I,O,q,W,P,_,K,ie,ae,se]}class Ut extends N{constructor(e){super(),X(this,e,Ot,Lt,Y,{value:0,label:1,style:2,show_label:3,source:4,tool:5,drop_text:6,or_text:7,upload_text:8})}}function qt(l){let e,t;return{c(){e=M("img"),g(e,"class","w-full h-full object-contain"),U(e.src,t=l[0])||g(e,"src",t),g(e,"style",l[2]),g(e,"alt","")},m(n,i){v(n,e,i)},p(n,i){i&1&&!U(e.src,t=n[0])&&g(e,"src",t),i&4&&g(e,"style",n[2])},d(n){n&&k(e)}}}function Wt(l){let e,t,n;return{c(){e=M("div"),t=M("img"),U(t.src,n=te)||g(t,"src",n),g(t,"alt",""),g(t,"class","h-6 opacity-20"),g(e,"class","min-h-[16rem] flex justify-center items-center")},m(i,o){v(i,e,o),E(e,t)},p:j,d(i){i&&k(e)}}}function Pt(l){let e,t,n,i;e=new Oe({props:{show_label:l[3],image:te,label:l[1]||"Image"}});function o(s,f){return s[0]===null?Wt:qt}let a=o(l),r=a(l);return{c(){T(e.$$.fragment),t=B(),r.c(),n=he()},m(s,f){z(e,s,f),v(s,t,f),r.m(s,f),v(s,n,f),i=!0},p(s,[f]){const u={};f&8&&(u.show_label=s[3]),f&2&&(u.label=s[1]||"Image"),e.$set(u),a===(a=o(s))&&r?r.p(s,f):(r.d(1),r=a(s),r&&(r.c(),r.m(n.parentNode,n)))},i(s){i||(p(e.$$.fragment,s),i=!0)},o(s){w(e.$$.fragment,s),i=!1},d(s){D(e,s),s&&k(t),r.d(s),s&&k(n)}}}function Ht(l,e,t){let{value:n}=e,{label:i=void 0}=e,{style:o=""}=e,{show_label:a}=e;const r=J();return l.$$set=s=>{"value"in s&&t(0,n=s.value),"label"in s&&t(1,i=s.label),"style"in s&&t(2,o=s.style),"show_label"in s&&t(3,a=s.show_label)},l.$$.update=()=>{l.$$.dirty&1&&n&&r("change",n)},[n,i,o,a]}class Nt extends N{constructor(e){super(),X(this,e,Ht,Pt,Y,{value:0,label:1,style:2,show_label:3})}}function Xt(l){let e,t,n;function i(a){l[11](a)}let o={style:l[1],source:l[2],tool:l[3],label:l[4],show_label:l[5],drop_text:l[9]("interface.drop_image"),or_text:l[9]("or"),upload_text:l[9]("interface.click_to_upload")};return l[0]!==void 0&&(o.value=l[0]),e=new Ut({props:o}),H.push(()=>Ae(e,"value",i)),e.$on("edit",l[12]),e.$on("clear",l[13]),e.$on("change",l[14]),e.$on("drag",l[15]),{c(){T(e.$$.fragment)},m(a,r){z(e,a,r),n=!0},p(a,r){const s={};r&2&&(s.style=a[1]),r&4&&(s.source=a[2]),r&8&&(s.tool=a[3]),r&16&&(s.label=a[4]),r&32&&(s.show_label=a[5]),r&512&&(s.drop_text=a[9]("interface.drop_image")),r&512&&(s.or_text=a[9]("or")),r&512&&(s.upload_text=a[9]("interface.click_to_upload")),!t&&r&1&&(t=!0,s.value=a[0],Le(()=>t=!1)),e.$set(s)},i(a){n||(p(e.$$.fragment,a),n=!0)},o(a){w(e.$$.fragment,a),n=!1},d(a){D(e,a)}}}function Yt(l){let e,t;return e=new Nt({props:{value:l[0],label:l[4],style:l[1],show_label:l[5]}}),{c(){T(e.$$.fragment)},m(n,i){z(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.value=n[0]),i&16&&(o.label=n[4]),i&2&&(o.style=n[1]),i&32&&(o.show_label=n[5]),e.$set(o)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Jt(l){let e,t,n,i,o,a;e=new ut({props:{tracked_status:l[6]}});const r=[Yt,Xt],s=[];function f(u,d){return u[7]==="static"?0:1}return n=f(l),i=s[n]=r[n](l),{c(){T(e.$$.fragment),t=B(),i.c(),o=he()},m(u,d){z(e,u,d),v(u,t,d),s[n].m(u,d),v(u,o,d),a=!0},p(u,d){const y={};d&64&&(y.tracked_status=u[6]),e.$set(y);let I=n;n=f(u),n===I?s[n].p(u,d):(ne(),w(s[I],1,1,()=>{s[I]=null}),le(),i=s[n],i?i.p(u,d):(i=s[n]=r[n](u),i.c()),p(i,1),i.m(o.parentNode,o))},i(u){a||(p(e.$$.fragment,u),p(i),a=!0)},o(u){w(e.$$.fragment,u),w(i),a=!1},d(u){D(e,u),u&&k(t),s[n].d(u),u&&k(o)}}}function Gt(l){let e,t;return e=new ot({props:{variant:l[7]==="dynamic"&&l[0]===null&&l[2]==="upload"?"dashed":"solid",color:l[8]?"green":"grey",padding:!1,$$slots:{default:[Jt]},$$scope:{ctx:l}}}),{c(){T(e.$$.fragment)},m(n,i){z(e,n,i),t=!0},p(n,[i]){const o={};i&133&&(o.variant=n[7]==="dynamic"&&n[0]===null&&n[2]==="upload"?"dashed":"solid"),i&256&&(o.color=n[8]?"green":"grey"),i&132095&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){w(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Kt(l,e,t){let n;et(l,tt,_=>t(9,n=_));let{value:i=null}=e,{default_value:o=null}=e,{style:a=""}=e,{source:r="upload"}=e,{tool:s="editor"}=e,{label:f}=e,{show_label:u}=e,{loading_status:d}=e,{mode:y}=e;const I=J();o&&(i=o);let O;function q(_){i=_,t(0,i)}function W(_){fe.call(this,l,_)}function F(_){fe.call(this,l,_)}function S(_){fe.call(this,l,_)}const P=({detail:_})=>t(8,O=_);return l.$$set=_=>{"value"in _&&t(0,i=_.value),"default_value"in _&&t(10,o=_.default_value),"style"in _&&t(1,a=_.style),"source"in _&&t(2,r=_.source),"tool"in _&&t(3,s=_.tool),"label"in _&&t(4,f=_.label),"show_label"in _&&t(5,u=_.show_label),"loading_status"in _&&t(6,d=_.loading_status),"mode"in _&&t(7,y=_.mode)},l.$$.update=()=>{l.$$.dirty&1&&I("change")},[i,a,r,s,f,u,d,y,O,n,o,q,W,F,S,P]}class Qt extends N{constructor(e){super(),X(this,e,Kt,Gt,Y,{value:0,default_value:10,style:1,source:2,tool:3,label:4,show_label:5,loading_status:6,mode:7})}}var sn=Qt;const rn=["static","dynamic"];export{sn as Component,fn as ExampleComponent,rn as modes};
