var Ye=Object.defineProperty,Je=Object.defineProperties;var Ke=Object.getOwnPropertyDescriptors;var ye=Object.getOwnPropertySymbols;var Ze=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable;var Ie=(l,e,t)=>e in l?Ye(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,Se=(l,e)=>{for(var t in e||(e={}))Ze.call(e,t)&&Ie(l,t,e[t]);if(ye)for(var t of ye(e))Ge.call(e,t)&&Ie(l,t,e[t]);return l},Ce=(l,e)=>Je(l,Ke(e));import{S as N,i as X,s as Y,e as M,F as q,a as m,b as y,n as B,h as I,z as J,Z as _e,B as H,Y as U,l as O,r as Fe,k as F,a8 as Qe,f as E,ab as Ve,m as xe,C as $e,o as z,q as D,u as v,v as k,w as T,t as ee,x as ne,y as le,j as he,H as Le,E as Ae,d as x,g as ue,I as et,X as tt,J as nt,K as lt,L as it,D as fe}from"./index.61dd5212.js";import{B as Oe}from"./BlockLabel.2206cae0.js";import{C as at,i as st,I as rt,W as ot}from"./Image.svelte_svelte_type_style_lang.85fea6dd.js";import{I as Me,M as ut}from"./ModifyUpload.d58e23aa.js";import{U as ft}from"./Upload.cf2efb0c.js";import{B as ct}from"./Block.0ce8dc17.js";import{S as dt}from"./StatusTracker.ad85499d.js";import{E as _n}from"./Image.26c806fc.js";import"./_commonjsHelpers.80d8c10d.js";var te="./assets/image.45facf29.svg",Ee="./assets/edit.8ee16a39.svg";function _t(l){let e,t;return{c(){e=M("img"),q(e.src,t=l[0])||m(e,"src",t),m(e,"alt","")},m(n,i){y(n,e,i),l[2](e)},p(n,[i]){i&1&&!q(e.src,t=n[0])&&m(e,"src",t)},i:B,o:B,d(n){n&&I(e),l[2](null)}}}function ht(l,e,t){let{image:n}=e,i;const o=J();_e(()=>{const r=new at(i,{autoCropArea:1,cropend(){const s=r.getCroppedCanvas().toDataURL();o("crop",s)}});return o("crop",n),()=>{r.destroy()}});function a(r){H[r?"unshift":"push"](()=>{i=r,t(1,i)})}return l.$$set=r=>{"image"in r&&t(0,n=r.image)},[n,i,a]}class gt extends N{constructor(e){super(),X(this,e,ht,_t,Y,{image:0})}}class ze{constructor(e,t){this.x=e,this.y=t}}class De extends ze{update(e){this.x=e.x,this.y=e.y}moveByAngle(e,t){const n=e+Math.PI/2;this.x=this.x+Math.sin(n)*t,this.y=this.y-Math.cos(n)*t}equalsTo(e){return this.x===e.x&&this.y===e.y}getDifferenceTo(e){return new ze(this.x-e.x,this.y-e.y)}getDistanceTo(e){const t=this.getDifferenceTo(e);return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}getAngleTo(e){const t=this.getDifferenceTo(e);return Math.atan2(t.y,t.x)}toObject(){return{x:this.x,y:this.y}}}const mt=30;class bt{constructor({radius:e=mt,enabled:t=!0,initialPoint:n={x:0,y:0}}={}){this.radius=e,this._isEnabled=t,this.pointer=new De(n.x,n.y),this.brush=new De(n.x,n.y),this.angle=0,this.distance=0,this._hasMoved=!1}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}isEnabled(){return this._isEnabled}setRadius(e){this.radius=e}getRadius(){return this.radius}getBrushCoordinates(){return this.brush.toObject()}getPointerCoordinates(){return this.pointer.toObject()}getBrush(){return this.brush}getPointer(){return this.pointer}getAngle(){return this.angle}getDistance(){return this.distance}brushHasMoved(){return this._hasMoved}update(e,{both:t=!1}={}){return this._hasMoved=!1,this.pointer.equalsTo(e)&&!t?!1:(this.pointer.update(e),t?(this._hasMoved=!0,this.brush.update(e),!0):(this._isEnabled?(this.distance=this.pointer.getDistanceTo(this.brush),this.angle=this.pointer.getAngleTo(this.brush),this.distance>this.radius&&(this.brush.moveByAngle(this.angle,this.distance-this.radius),this._hasMoved=!0)):(this.distance=0,this.angle=0,this.brush.update(e),this._hasMoved=!0),!0))}}function Te(l,e,t){const n=l.slice();return n[40]=e[t].name,n[41]=e[t].zIndex,n[42]=e,n[43]=t,n}function je(l){let e;return{c(){e=M("div"),e.textContent="Start drawing",m(e,"class","absolute inset-0 flex items-center justify-center z-40 pointer-events-none touch-none text-gray-400 md:text-xl")},m(t,n){y(t,e,n)},d(t){t&&I(e)}}}function Re(l){let e,t,n=l[40],i,o;const a=()=>l[14](e,n),r=()=>l[14](null,n);return{c(){e=M("canvas"),m(e,"key",t=l[40]),U(e,"display","block"),U(e,"position","absolute"),U(e,"z-index",l[41]),U(e,"width",l[0]+"px"),U(e,"height",l[1]+"px")},m(s,u){y(s,e,u),a(),i||(o=[O(e,"mousedown",l[40]==="interface"?l[6]:void 0),O(e,"mousemove",l[40]==="interface"?l[7]:void 0),O(e,"mouseup",l[40]==="interface"?l[8]:void 0),O(e,"mouseout",l[40]==="interface"?l[8]:void 0),O(e,"touchstart",l[40]==="interface"?l[6]:void 0),O(e,"touchmove",l[40]==="interface"?l[7]:void 0),O(e,"touchend",l[40]==="interface"?l[8]:void 0),O(e,"touchcancel",l[40]==="interface"?l[8]:void 0)],i=!0)},p(s,u){l=s,u[0]&1&&U(e,"width",l[0]+"px"),u[0]&2&&U(e,"height",l[1]+"px"),n!==l[40]&&(r(),n=l[40],a())},d(s){s&&I(e),r(),i=!1,Fe(o)}}}function pt(l){let e,t,n,i=!l[3]&&je(),o=l[5],a=[];for(let r=0;r<o.length;r+=1)a[r]=Re(Te(l,o,r));return{c(){e=M("div"),i&&i.c(),t=F();for(let r=0;r<a.length;r+=1)a[r].c();m(e,"class","touch-none relative"),U(e,"height","100%"),U(e,"width","100%"),U(e,"background-color",wt),Qe(()=>l[16].call(e))},m(r,s){y(r,e,s),i&&i.m(e,null),E(e,t);for(let u=0;u<a.length;u+=1)a[u].m(e,null);l[15](e),n=Ve(e,l[16].bind(e))},p(r,s){if(r[3]?i&&(i.d(1),i=null):i||(i=je(),i.c(),i.m(e,t)),s[0]&487){o=r[5];let u;for(u=0;u<o.length;u+=1){const f=Te(r,o,u);a[u]?a[u].p(f,s):(a[u]=Re(f),a[u].c(),a[u].m(e,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=o.length}},i:B,o:B,d(r){r&&I(e),i&&i.d(),xe(a,r),l[15](null),n()}}}let $=50,ce="#444",de="#aaa",wt="#FFF";function vt(l,e){return{x:l.x+(e.x-l.x)/2,y:l.y+(e.y-l.y)/2}}function kt(l,e,t){const n=J();let{value:i}=e,o,a=400,r=400;const s=[{name:"interface",zIndex:15},{name:"drawing",zIndex:11},{name:"temp",zIndex:12}];let u={},f={},d=[],_=[],w=!0,L=!0,j=!1,W=!1,A=!1,S=null,P=null,h=null,Z=null;_e(()=>{Object.keys(u).forEach(c=>{f[c]=u[c].getContext("2d")}),S=new bt({radius:$/1.5,enabled:!0,initialPoint:{x:window.innerWidth/2,y:window.innerHeight/2}}),P=$,Z=new st((c,g)=>We(c,g)),Z.observe(h),oe(),t(13,o=!0),window.setTimeout(()=>{const c=window.innerWidth/2,g=window.innerHeight/2;S.update({x:c-P/4,y:g},{both:!0}),S.update({x:c+P/4,y:g},{both:!1}),w=!0,L=!0,G()},100)}),$e(()=>{t(13,o=!1),Z.unobserve(h)});function ie(){const c=_.slice(0,-1);G(),b({lines:c}),ve()}let ae=()=>JSON.stringify({lines:_,width:a,height:r}),se=c=>{if(typeof c!="string")throw new Error("save_data needs to be of type string!");const{lines:g,width:p,height:C}=JSON.parse(c);if(!g||typeof g.push!="function")throw new Error("save_data.lines needs to be an array!");if(G(),p===a&&C===r)b({lines:g});else{const R=a/p,K=r/C;b({lines:g.map(Q=>Ce(Se({},Q),{points:Q.points.map(V=>({x:V.x*R,y:V.y*K})),brush_radius:Q.brush_radius}))})}},b=({lines:c})=>{c.forEach(g=>{const{points:p,brush_color:C,brush_radius:R}=g;pe({points:p,brush_color:C,brush_radius:R}),d=p,we()})},Ue=c=>{c.preventDefault(),t(3,A=!0),W=!0;const{x:g,y:p}=me(c);c.touches&&c.touches.length>0&&S.update({x:g,y:p},{both:!0}),be(g,p)},ge=c=>{c.preventDefault();const{x:g,y:p}=me(c);be(g,p)},qe=c=>{c.preventDefault(),ge(c),j=!1,W=!1,we()},We=c=>{const g=ae();for(const p of c){const{width:C,height:R}=p.contentRect;re(u.interface,C,R),re(u.drawing,C,R),re(u.temp,C,R),oe({once:!0})}se(g)},re=(c,g,p)=>{c.width=g*3,c.height=p*3,c.style.width=g,c.style.height=p},me=c=>{const g=u.interface.getBoundingClientRect();let p=c.clientX,C=c.clientY;return c.changedTouches&&c.changedTouches.length>0&&(p=c.changedTouches[0].clientX,C=c.changedTouches[0].clientY),{x:p-g.left,y:C-g.top}},be=(c,g)=>{S.update({x:c*3,y:g*3});const p=!S.isEnabled();(W&&!j||p&&W)&&(j=!0,d.push(S.brush.toObject())),j&&(d.push(S.brush.toObject()),pe({points:d,brush_color:ce,brush_radius:$})),w=!0},pe=({points:c,brush_color:g,brush_radius:p})=>{f.temp.lineJoin="round",f.temp.lineCap="round",f.temp.strokeStyle=g,f.temp.clearRect(0,0,f.temp.canvas.width,f.temp.canvas.height),f.temp.lineWidth=p;let C=c[0],R=c[1];f.temp.moveTo(R.x,R.y),f.temp.beginPath();for(var K=1,Q=c.length;K<Q;K++){var V=vt(C,R);f.temp.quadraticCurveTo(C.x,C.y,V.x,V.y),C=c[K],R=c[K+1]}f.temp.lineTo(C.x,C.y),f.temp.stroke()},we=()=>{if(d.length<2)return;_.push({points:[...d],brush_color:ce,brush_radius:$}),d.length=0;const c=u.temp.width,g=u.temp.height;f.drawing.drawImage(u.temp,0,0,c,g),f.temp.clearRect(0,0,c,g),ve()},ve=()=>{n("change",ke())};function G(){t(3,A=!1),_=[],L=!0,f.drawing.clearRect(0,0,u.drawing.width,u.drawing.height),f.temp.clearRect(0,0,u.temp.width,u.temp.height),f.drawing.fillStyle="#FFFFFF",f.drawing.fillRect(0,0,u.drawing.width,u.drawing.height)}let oe=({once:c=!1}={})=>{if(w||L){const g=S.getPointerCoordinates(),p=S.getBrushCoordinates();Pe(f.interface,g,p),w=!1,L=!1}c||window.requestAnimationFrame(()=>{oe()})},Pe=(c,g,p)=>{c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.fillStyle=ce,c.arc(p.x,p.y,$/2,0,Math.PI*2,!0),c.fill(),c.beginPath(),c.fillStyle=de,c.arc(g.x,g.y,4,0,Math.PI*2,!0),c.fill(),S.isEnabled()&&(c.beginPath(),c.lineWidth=2,c.lineCap="round",c.setLineDash([2,4]),c.strokeStyle=de,c.stroke()),c.beginPath(),c.fillStyle=de,c.arc(p.x,p.y,2,0,Math.PI*2,!0),c.fill()};function ke(){return u.drawing.toDataURL("image/png")}function He(c,g){H[c?"unshift":"push"](()=>{u[g]=c,t(2,u)})}function Ne(c){H[c?"unshift":"push"](()=>{h=c,t(4,h)})}function Xe(){a=this.offsetWidth,r=this.offsetHeight,t(0,a),t(1,r)}return l.$$set=c=>{"value"in c&&t(9,i=c.value)},l.$$.update=()=>{l.$$.dirty[0]&8704&&o&&!i&&G()},[a,r,u,A,h,s,Ue,ge,qe,i,ie,G,ke,o,He,Ne,Xe]}class yt extends N{constructor(e){super(),X(this,e,kt,pt,Y,{value:9,undo:10,clear:11,get_image_data:12},null,[-1,-1])}get undo(){return this.$$.ctx[10]}get clear(){return this.$$.ctx[11]}get get_image_data(){return this.$$.ctx[12]}}var It="./assets/undo.f4cff58b.svg",St="./assets/clear.88e065e8.svg";function Ct(l){let e,t,n,i,o;return t=new Me({props:{image:It,alt:"undo sketch"}}),t.$on("click",l[1]),i=new Me({props:{image:St,alt:"clear sketch"}}),i.$on("click",l[2]),{c(){e=M("div"),z(t.$$.fragment),n=F(),z(i.$$.fragment),m(e,"class","z-50 top-2 right-2 justify-end flex gap-1 absolute")},m(a,r){y(a,e,r),D(t,e,null),E(e,n),D(i,e,null),o=!0},p:B,i(a){o||(v(t.$$.fragment,a),v(i.$$.fragment,a),o=!0)},o(a){k(t.$$.fragment,a),k(i.$$.fragment,a),o=!1},d(a){a&&I(e),T(t),T(i)}}}function Mt(l){const e=J();return[e,()=>e("undo"),()=>e("clear")]}class Et extends N{constructor(e){super(),X(this,e,Mt,Ct,Y,{})}}function zt(l){let e,t,n,i,o,a,r,s,u;return{c(){e=M("div"),t=M("div"),n=M("button"),n.textContent="Save",i=F(),o=M("button"),o.textContent="Cancel",a=F(),r=M("div"),m(t,"class","image_editor_buttons"),m(e,"class","fixed w-screen h-screen top-0 left-0 bg-black bg-opacity-50 z-40 flex flex-col justify-center items-center")},m(f,d){y(f,e,d),E(e,t),E(t,n),E(t,i),E(t,o),E(e,a),E(e,r),l[6](r),s||(u=[O(n,"click",l[4]),O(o,"click",l[5])],s=!0)},p:B,i:B,o:B,d(f){f&&I(e),l[6](null),s=!1,Fe(u)}}}function Dt(l,e,t){let{value:n}=e,i,o;const a=J();function r(){t(1,o=new rt(i,{usageStatistics:!1,includeUI:{loadImage:{path:n,name:"Edit Image"},menuBarPosition:"left",uiSize:{width:"800px",height:"600px"}},cssMaxWidth:700,cssMaxHeight:500,selectionStyle:{cornerSize:20,rotatingPointOffset:70}}))}_e(r);const s=()=>a("save",o.toDataURL()),u=()=>a("cancel");function f(d){H[d?"unshift":"push"](()=>{i=d,t(0,i)})}return l.$$set=d=>{"value"in d&&t(3,n=d.value)},[i,o,a,n,s,u,f]}class Tt extends N{constructor(e){super(),X(this,e,Dt,zt,Y,{value:3})}}function jt(l){let e,t;return{c(){e=M("img"),m(e,"class","w-full h-full object-contain svelte-i8mnhh"),q(e.src,t=l[0])||m(e,"src",t),m(e,"style",l[2]),m(e,"alt","")},m(n,i){y(n,e,i)},p(n,i){i&1&&!q(e.src,t=n[0])&&m(e,"src",t),i&4&&m(e,"style",n[2])},i:B,o:B,d(n){n&&I(e)}}}function Rt(l){let e,t,n,i,o,a,r=l[10]==="edit"&&Be(l);return t=new ut({props:{editable:!0}}),t.$on("edit",l[20]),t.$on("clear",l[13]),{c(){r&&r.c(),e=F(),z(t.$$.fragment),n=F(),i=M("img"),m(i,"class","w-full h-full object-contain svelte-i8mnhh"),q(i.src,o=l[0])||m(i,"src",o),m(i,"style",l[2]),m(i,"alt","")},m(s,u){r&&r.m(s,u),y(s,e,u),D(t,s,u),y(s,n,u),y(s,i,u),a=!0},p(s,u){s[10]==="edit"?r?(r.p(s,u),u&1024&&v(r,1)):(r=Be(s),r.c(),v(r,1),r.m(e.parentNode,e)):r&&(ne(),k(r,1,1,()=>{r=null}),le()),(!a||u&1&&!q(i.src,o=s[0]))&&m(i,"src",o),(!a||u&4)&&m(i,"style",s[2])},i(s){a||(v(r),v(t.$$.fragment,s),a=!0)},o(s){k(r),k(t.$$.fragment,s),a=!1},d(s){r&&r.d(s),s&&I(e),T(t,s),s&&I(n),s&&I(i)}}}function Bt(l){let e,t;return e=new gt({props:{image:l[0]}}),e.$on("crop",l[14]),{c(){z(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.image=n[0]),e.$set(o)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function Ft(l){let e,t,n,i;const o=[Ot,At],a=[];function r(s,u){return s[4]==="upload"?0:s[4]==="webcam"?1:-1}return~(e=r(l))&&(t=a[e]=o[e](l)),{c(){t&&t.c(),n=he()},m(s,u){~e&&a[e].m(s,u),y(s,n,u),i=!0},p(s,u){let f=e;e=r(s),e===f?~e&&a[e].p(s,u):(t&&(ne(),k(a[f],1,1,()=>{a[f]=null}),le()),~e?(t=a[e],t?t.p(s,u):(t=a[e]=o[e](s),t.c()),v(t,1),t.m(n.parentNode,n)):t=null)},i(s){i||(v(t),i=!0)},o(s){k(t),i=!1},d(s){~e&&a[e].d(s),s&&I(n)}}}function Lt(l){let e,t,n,i;e=new Et({}),e.$on("undo",l[15]),e.$on("clear",l[16]);let o={value:l[0]};return n=new yt({props:o}),l[17](n),n.$on("change",l[14]),{c(){z(e.$$.fragment),t=F(),z(n.$$.fragment)},m(a,r){D(e,a,r),y(a,t,r),D(n,a,r),i=!0},p(a,r){const s={};r&1&&(s.value=a[0]),n.$set(s)},i(a){i||(v(e.$$.fragment,a),v(n.$$.fragment,a),i=!0)},o(a){k(e.$$.fragment,a),k(n.$$.fragment,a),i=!1},d(a){T(e,a),a&&I(t),l[17](null),T(n,a)}}}function Be(l){let e,t;return e=new Tt({props:{value:l[0]}}),e.$on("cancel",l[19]),e.$on("save",l[14]),{c(){z(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.value=n[0]),e.$set(o)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function At(l){let e,t;return e=new ot({}),e.$on("capture",l[14]),{c(){z(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p:B,i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function Ot(l){let e,t,n;function i(a){l[18](a)}let o={filetype:"image/x-png,image/gif,image/jpeg",include_file_metadata:!1,$$slots:{default:[Ut]},$$scope:{ctx:l}};return l[9]!==void 0&&(o.dragging=l[9]),e=new ft({props:o}),H.push(()=>Le(e,"dragging",i)),e.$on("load",l[12]),{c(){z(e.$$.fragment)},m(a,r){D(e,a,r),n=!0},p(a,r){const s={};r&4194752&&(s.$$scope={dirty:r,ctx:a}),!t&&r&512&&(t=!0,s.dragging=a[9],Ae(()=>t=!1)),e.$set(s)},i(a){n||(v(e.$$.fragment,a),n=!0)},o(a){k(e.$$.fragment,a),n=!1},d(a){T(e,a)}}}function Ut(l){let e,t,n,i,o,a,r,s,u;return{c(){e=M("div"),t=x(l[6]),n=F(),i=M("span"),o=x("- "),a=x(l[7]),r=x(" -"),s=F(),u=x(l[8]),m(i,"class","text-gray-300 svelte-i8mnhh"),m(e,"class","flex flex-col svelte-i8mnhh")},m(f,d){y(f,e,d),E(e,t),E(e,n),E(e,i),E(i,o),E(i,a),E(i,r),E(e,s),E(e,u)},p(f,d){d&64&&ue(t,f[6]),d&128&&ue(a,f[7]),d&256&&ue(u,f[8])},d(f){f&&I(e)}}}function qt(l){let e,t,n,i,o,a;e=new Oe({props:{show_label:l[3],image:l[4]==="canvas"?Ee:te,label:l[1]||(l[4]==="canvas"?"Sketch":"Image")}});const r=[Lt,Ft,Bt,Rt,jt],s=[];function u(f,d){return f[4]==="canvas"?0:f[0]===null?1:f[5]==="select"?2:f[5]==="editor"?3:4}return i=u(l),o=s[i]=r[i](l),{c(){z(e.$$.fragment),t=F(),n=M("div"),o.c(),m(n,"class","svelte-i8mnhh"),ee(n,"bg-gray-200",l[0]),ee(n,"h-60",l[4]!=="webcam")},m(f,d){D(e,f,d),y(f,t,d),y(f,n,d),s[i].m(n,null),a=!0},p(f,[d]){const _={};d&8&&(_.show_label=f[3]),d&16&&(_.image=f[4]==="canvas"?Ee:te),d&18&&(_.label=f[1]||(f[4]==="canvas"?"Sketch":"Image")),e.$set(_);let w=i;i=u(f),i===w?s[i].p(f,d):(ne(),k(s[w],1,1,()=>{s[w]=null}),le(),o=s[i],o?o.p(f,d):(o=s[i]=r[i](f),o.c()),v(o,1),o.m(n,null)),d&1&&ee(n,"bg-gray-200",f[0]),d&16&&ee(n,"h-60",f[4]!=="webcam")},i(f){a||(v(e.$$.fragment,f),v(o),a=!0)},o(f){k(e.$$.fragment,f),k(o),a=!1},d(f){T(e,f),f&&I(t),f&&I(n),s[i].d()}}}function Wt(l,e,t){let{value:n}=e,{label:i=void 0}=e,{style:o=""}=e,{show_label:a}=e,{source:r="upload"}=e,{tool:s="editor"}=e,{drop_text:u="Drop an image file"}=e,{or_text:f="or"}=e,{upload_text:d="click to upload"}=e,_="view",w;function L({detail:b}){t(0,n=b)}function j({detail:b}){t(0,n=null),A("clear")}function W({detail:b}){t(0,n=b),t(10,_="view"),A("edit")}const A=J();let S=!1;const P=()=>w.undo(),h=()=>w.clear();function Z(b){H[b?"unshift":"push"](()=>{w=b,t(11,w)})}function ie(b){S=b,t(9,S)}const ae=()=>t(10,_="view"),se=()=>t(10,_="edit");return l.$$set=b=>{"value"in b&&t(0,n=b.value),"label"in b&&t(1,i=b.label),"style"in b&&t(2,o=b.style),"show_label"in b&&t(3,a=b.show_label),"source"in b&&t(4,r=b.source),"tool"in b&&t(5,s=b.tool),"drop_text"in b&&t(6,u=b.drop_text),"or_text"in b&&t(7,f=b.or_text),"upload_text"in b&&t(8,d=b.upload_text)},l.$$.update=()=>{l.$$.dirty&1&&A("change",n),l.$$.dirty&512&&A("drag",S)},[n,i,o,a,r,s,u,f,d,S,_,w,L,j,W,P,h,Z,ie,ae,se]}class Pt extends N{constructor(e){super(),X(this,e,Wt,qt,Y,{value:0,label:1,style:2,show_label:3,source:4,tool:5,drop_text:6,or_text:7,upload_text:8})}}function Ht(l){let e,t;return{c(){e=M("img"),m(e,"class","w-full h-full object-contain"),q(e.src,t=l[0])||m(e,"src",t),m(e,"style",l[2]),m(e,"alt","")},m(n,i){y(n,e,i)},p(n,i){i&1&&!q(e.src,t=n[0])&&m(e,"src",t),i&4&&m(e,"style",n[2])},d(n){n&&I(e)}}}function Nt(l){let e,t,n;return{c(){e=M("div"),t=M("img"),q(t.src,n=te)||m(t,"src",n),m(t,"alt",""),m(t,"class","h-6 opacity-20"),m(e,"class","min-h-[16rem] flex justify-center items-center")},m(i,o){y(i,e,o),E(e,t)},p:B,d(i){i&&I(e)}}}function Xt(l){let e,t,n,i;e=new Oe({props:{show_label:l[3],image:te,label:l[1]||"Image"}});function o(s,u){return s[0]===null?Nt:Ht}let a=o(l),r=a(l);return{c(){z(e.$$.fragment),t=F(),r.c(),n=he()},m(s,u){D(e,s,u),y(s,t,u),r.m(s,u),y(s,n,u),i=!0},p(s,[u]){const f={};u&8&&(f.show_label=s[3]),u&2&&(f.label=s[1]||"Image"),e.$set(f),a===(a=o(s))&&r?r.p(s,u):(r.d(1),r=a(s),r&&(r.c(),r.m(n.parentNode,n)))},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){k(e.$$.fragment,s),i=!1},d(s){T(e,s),s&&I(t),r.d(s),s&&I(n)}}}function Yt(l,e,t){let{value:n}=e,{label:i=void 0}=e,{style:o=""}=e,{show_label:a}=e;const r=J();return l.$$set=s=>{"value"in s&&t(0,n=s.value),"label"in s&&t(1,i=s.label),"style"in s&&t(2,o=s.style),"show_label"in s&&t(3,a=s.show_label)},l.$$.update=()=>{l.$$.dirty&1&&n&&r("change",n)},[n,i,o,a]}class Jt extends N{constructor(e){super(),X(this,e,Yt,Xt,Y,{value:0,label:1,style:2,show_label:3})}}function Kt(l){let e,t,n;function i(a){l[11](a)}let o={style:l[1],source:l[2],tool:l[3],label:l[4],show_label:l[5],drop_text:l[9]("interface.drop_image"),or_text:l[9]("or"),upload_text:l[9]("interface.click_to_upload")};return l[0]!==void 0&&(o.value=l[0]),e=new Pt({props:o}),H.push(()=>Le(e,"value",i)),e.$on("edit",l[12]),e.$on("clear",l[13]),e.$on("change",l[14]),e.$on("drag",l[15]),{c(){z(e.$$.fragment)},m(a,r){D(e,a,r),n=!0},p(a,r){const s={};r&2&&(s.style=a[1]),r&4&&(s.source=a[2]),r&8&&(s.tool=a[3]),r&16&&(s.label=a[4]),r&32&&(s.show_label=a[5]),r&512&&(s.drop_text=a[9]("interface.drop_image")),r&512&&(s.or_text=a[9]("or")),r&512&&(s.upload_text=a[9]("interface.click_to_upload")),!t&&r&1&&(t=!0,s.value=a[0],Ae(()=>t=!1)),e.$set(s)},i(a){n||(v(e.$$.fragment,a),n=!0)},o(a){k(e.$$.fragment,a),n=!1},d(a){T(e,a)}}}function Zt(l){let e,t;return e=new Jt({props:{value:l[0],label:l[4],style:l[1],show_label:l[5]}}),{c(){z(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.value=n[0]),i&16&&(o.label=n[4]),i&2&&(o.style=n[1]),i&32&&(o.show_label=n[5]),e.$set(o)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function Gt(l){let e,t,n,i,o,a;const r=[l[6]];let s={};for(let _=0;_<r.length;_+=1)s=nt(s,r[_]);e=new dt({props:s});const u=[Zt,Kt],f=[];function d(_,w){return _[7]==="static"?0:1}return n=d(l),i=f[n]=u[n](l),{c(){z(e.$$.fragment),t=F(),i.c(),o=he()},m(_,w){D(e,_,w),y(_,t,w),f[n].m(_,w),y(_,o,w),a=!0},p(_,w){const L=w&64?lt(r,[it(_[6])]):{};e.$set(L);let j=n;n=d(_),n===j?f[n].p(_,w):(ne(),k(f[j],1,1,()=>{f[j]=null}),le(),i=f[n],i?i.p(_,w):(i=f[n]=u[n](_),i.c()),v(i,1),i.m(o.parentNode,o))},i(_){a||(v(e.$$.fragment,_),v(i),a=!0)},o(_){k(e.$$.fragment,_),k(i),a=!1},d(_){T(e,_),_&&I(t),f[n].d(_),_&&I(o)}}}function Qt(l){let e,t;return e=new ct({props:{variant:l[7]==="dynamic"&&l[0]===null&&l[2]==="upload"?"dashed":"solid",color:l[8]?"green":"grey",padding:!1,$$slots:{default:[Gt]},$$scope:{ctx:l}}}),{c(){z(e.$$.fragment)},m(n,i){D(e,n,i),t=!0},p(n,[i]){const o={};i&133&&(o.variant=n[7]==="dynamic"&&n[0]===null&&n[2]==="upload"?"dashed":"solid"),i&256&&(o.color=n[8]?"green":"grey"),i&132095&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function Vt(l,e,t){let n;et(l,tt,h=>t(9,n=h));let{value:i=null}=e,{default_value:o=null}=e,{style:a=""}=e,{source:r="upload"}=e,{tool:s="editor"}=e,{label:u}=e,{show_label:f}=e,{loading_status:d}=e,{mode:_}=e;const w=J();o&&(i=o);let L;function j(h){i=h,t(0,i)}function W(h){fe.call(this,l,h)}function A(h){fe.call(this,l,h)}function S(h){fe.call(this,l,h)}const P=({detail:h})=>t(8,L=h);return l.$$set=h=>{"value"in h&&t(0,i=h.value),"default_value"in h&&t(10,o=h.default_value),"style"in h&&t(1,a=h.style),"source"in h&&t(2,r=h.source),"tool"in h&&t(3,s=h.tool),"label"in h&&t(4,u=h.label),"show_label"in h&&t(5,f=h.show_label),"loading_status"in h&&t(6,d=h.loading_status),"mode"in h&&t(7,_=h.mode)},l.$$.update=()=>{l.$$.dirty&1&&w("change")},[i,a,r,s,u,f,d,_,L,n,o,j,W,A,S,P]}class xt extends N{constructor(e){super(),X(this,e,Vt,Qt,Y,{value:0,default_value:10,style:1,source:2,tool:3,label:4,show_label:5,loading_status:6,mode:7})}}var un=xt;const fn=["static","dynamic"];export{un as Component,_n as ExampleComponent,fn as modes};
