(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[877],{7039:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/settings",function(){return t(8438)}])},8438:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return K}});var r=t(5893),i=t(7294),o=t(7948),a=t(2315),c=t(4051),l=t.n(c),s=t(2734),u=t(6886),d=t(8456),f=t(1163),p=t(7262),h=t(9375),g=t(5934),y=t(9875),m=t(796),x=t(9953),b=t(3395),v=t(9653),j=t(4054),Z=t(7709),w=t(7109),P=t(3946),C=t(5545),S=t(8514),k=t(8849),O=t(5317);function I(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var _={log_level:{name:"Log Level",description:"Log level for the application",icon:O.eLz},port_api:{name:"API Port",description:"Port for the API and WebSocket",icon:O.A0p}};var A=function(e){var n=e.keyIn,t=e.valueIn,o=e.handleChanged,a=function(e){A(e)},c=function(e){a(e.target.value)},l=(0,i.useState)(!1),d=l[0],f=l[1],p=(0,i.useState)(t),h=p[0],A=p[1],E=(0,i.useMemo)((function(){return t!==h}),[t,h]),N=_[n],T=N.name,z=N.description,D=N.icon,G=N.containerDisabled,R=N.isPassword,W=N.minimum,L=(0,s.Z)();return(0,r.jsxs)(y.ZP,{children:[(0,r.jsx)(m.Z,{children:(0,r.jsx)(k.Icon,{id:"icon",title:T,size:1,path:D})}),(0,r.jsx)(x.Z,{style:{maxWidth:"64%"},primary:T,secondary:z,sx:{userSelect:"none"}}),(0,r.jsx)(b.Z,{sx:{width:420,textAlign:"end"},children:(0,r.jsxs)(u.ZP,{container:!0,alignContent:"center",justifyContent:"flex-end",children:[(0,r.jsx)(u.ZP,{item:!0,children:"boolean"===typeof h?(0,r.jsx)(v.Z,{edge:"end",disabled:G,defaultChecked:h,onChange:function(e,n){a(n)}}):"string"===typeof h&&"api_key"===n?(0,r.jsx)(j.Z,{fullWidth:!0,variant:"outlined",children:(0,r.jsx)(Z.Z,{type:"text",disabled:!0,value:h,endAdornment:(0,r.jsxs)(w.Z,{position:"end",children:[(0,r.jsx)(P.Z,{"aria-label":"Generate Api Key",onClick:function(){a((0,g.Z)())},edge:"end",size:"large",sx:{margin:L.spacing(-1,-.5)},children:(0,r.jsx)(k.Icon,{id:"generate-api-key",title:"Generate API Key",size:1,path:O.VmU})}),(0,r.jsx)(P.Z,{"aria-label":"Copy to clipboard",onClick:function(){return e=h,void navigator.permissions.query({name:"clipboard-write"}).then((function(n){"granted"!==n.state&&"prompt"!==n.state||navigator.clipboard.writeText(e)}));var e},size:"large",sx:{margin:L.spacing(-1,-.5)},children:(0,r.jsx)(k.Icon,{id:"copy-to-clipboard",title:"Copy to clipboard",size:.8,path:O.a0Z})})]})})}):"string"===typeof h&&"log_level"===n?(0,r.jsx)(C.Z,{id:n,options:["DEBUG","INFO","WARNING","ERROR","CRITICAL"],renderInput:function(e){return(0,r.jsx)(S.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){I(e,n,t[n])}))}return e}({},e,{variant:"outlined"}))},onChange:function(e,n){n&&a(n)},sx:{width:210},value:h}):"string"===typeof h&&R?(0,r.jsx)(j.Z,{variant:"outlined",children:(0,r.jsx)(Z.Z,{type:d?"text":"password",defaultValue:h,onChange:c,endAdornment:(0,r.jsx)(w.Z,{position:"end",children:(0,r.jsx)(P.Z,{"aria-label":"Toggle visibility",onClick:function(){f(!d)},onMouseDown:function(e){e.preventDefault()},size:"large",children:(0,r.jsx)(k.Icon,{id:"copy-to-clipboard",title:"Copy to clipboard",size:.8,path:d?O.rgx:O.DqW})})})})}):"string"===typeof h?(0,r.jsx)(S.Z,{type:"text",defaultValue:h,disabled:G,onChange:c,variant:"outlined"}):"number"===typeof h?(0,r.jsx)(S.Z,{error:!!W&&h<W,type:"number",disabled:G,inputProps:{minimum:W},defaultValue:h,onChange:c,variant:"outlined"}):""}),(0,r.jsx)(u.ZP,{item:!0,children:(0,r.jsx)(P.Z,{disabled:!1===E,onClick:function(){o(n,h)},sx:{margin:L.spacing(1)},children:(0,r.jsx)(k.Icon,{id:"save",title:"Save",size:1,path:O.JTj,style:{opacity:E?1:.25}})})})]})})]})},E=t(5861),N=t(5113),T=t(8462);var z,D=function(e){var n=e.name,t=e.description,i=e.children;return(0,r.jsxs)(u.ZP,{container:!0,direction:"row",item:!0,xs:12,children:[(0,r.jsxs)(u.ZP,{item:!0,xs:4,style:{userSelect:"none"},children:[(0,r.jsx)(E.Z,{component:"h3",variant:"h5",children:n}),(0,r.jsx)(E.Z,{variant:"subtitle1",children:t})]}),(0,r.jsx)(u.ZP,{item:!0,xs:8,children:(0,r.jsx)(N.Z,{children:(0,r.jsx)(T.Z,{children:i})})})]})};function G(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function R(e,n,t,r,i,o,a){try{var c=e[o](a),l=c.value}catch(s){return void t(s)}c.done?n(l):Promise.resolve(l).then(r,i)}function W(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function L(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,c=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(l){c=!0,i=l}finally{try{a||null==t.return||t.return()}finally{if(c)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return G(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return G(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var F=function(){var e=L((0,p.r)(),2),n=e[0],t=e[1],o=(0,i.useState)(!1),a=o[0],c=o[1],g=(0,f.useRouter)().query,y=(0,i.useCallback)((function(e){if(console.log("Event:",e),"SETTINGS_RESULT"===e.type){console.log("Settings result:",e.data);var n={};e.data.forEach((function(e){"boolean"===typeof e.value||Number.isNaN(Number(e.value))?n[e.key]=e.value:n[e.key]=Number(e.value)})),console.log("Settings:",n),t(n)}}),[t]),m=(0,i.useCallback)((function(e,n){var t;console.log("Setup WebSocketConnection"),z=new h.C(e,n,(t=l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z.getSettings();case 1:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){R(o,r,i,a,c,"next",e)}function c(e){R(o,r,i,a,c,"throw",e)}a(void 0)}))})),z.onEvent=y}),[y]),x=(0,i.useCallback)((function(e,r){z.updateSetting(e,r),t(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){W(e,n,t[n])}))}return e}({},n,W({},e,r)))}),[n,t]);(0,i.useEffect)((function(){!a&&g&&g.apiKey&&(c(!0),m(Number(g.apiPort)||9170,String(g.apiKey)))}),[a,m,g]);var b=(0,s.Z)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(u.ZP,{container:!0,direction:"column",spacing:2,alignItems:"stretch",sx:{marginBottom:b.spacing(8),padding:b.spacing(2)},children:n?(0,r.jsx)(D,{name:"General",description:"General settings",children:(0,r.jsx)(r.Fragment,{children:Object.keys(n).map((function(e,t){return(0,r.jsx)(A,{keyIn:e,valueIn:n[e],handleChanged:x},t)}))})}):(0,r.jsx)(u.ZP,{container:!0,direction:"row",justifyContent:"center",sx:{margin:b.spacing(2,0,10)},children:(0,r.jsx)(d.Z,{})})})})};var K=function(){return(0,r.jsx)(a.Z,{title:"Settings",url:"https://system-bridge.timmo.dev",description:"Frontend for System Bridge",children:(0,r.jsx)(o.Z,{component:"article",maxWidth:"xl",children:(0,r.jsx)(F,{})})})}}},function(e){e.O(0,[702,964,524,301,545,31,807,471,774,888,179],(function(){return n=7039,e(e.s=n);var n}));var n=e.O();_N_E=n}]);